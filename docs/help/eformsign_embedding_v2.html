<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>eformsign機能の埋め込み &#8212; eformsign API guide 2024.12.27 ドキュメント</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic_mod.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/code-tabs.css" type="text/css" />
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=27a1996f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/translations.js?v=8bd571c8"></script>
    <script src="../_static/code-tabs.js?v=c983d12e"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/petite-vue.js"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="eformsign APIの始め方：実践ガイド" href="eformsign_api_quickstart.html" />
    <link rel="prev" title="eformsign APIガイド" href="eformsign_api_overview.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    
        <div id="notification_banner" data-banner-hiding="temporary" v-show="!permanentlyHidden">
    <p v-if="visible" id="content"><a href="https://www.eformsign.com/">eformsign 바로가기</a></p>
    <a class="close" href="#" @click.prevent="toggleVisible()">[[ visible ? '&#x25B2; HIDE' : '&#x25BC; SHOW BANNER' ]]</a>
</div>

<script>
(function() {
    const topNav = document.querySelector('#top_nav')
    const notificationContent = document.querySelector('#notification_banner p#content').innerText
    const localStorageKey = 'readNotification'
    const bannerHiding = document.querySelector('#notification_banner').dataset['bannerHiding']
    const cssVariableName = '--navbarHeight'
    const rootElement = document.documentElement

    /*************************************************************************/
    // Local storage for remembering if the user has read the notification.

    function checkAlreadyRead() {
        return localStorage.getItem(localStorageKey) == notificationContent
    }

    function setRead() {
        localStorage.setItem(localStorageKey, notificationContent)
    }

    function clearRead() {
        localStorage.removeItem(localStorageKey)
    }

    const alreadyRead = checkAlreadyRead()
    const permanentlyHidden = alreadyRead && bannerHiding == 'permanent'

    /*************************************************************************/
    // Updating a CSS variable so other elements adjust to the nav bar height.

    function updateNavbarHeight() {
        // Only update it if the delta is significant. Otherwise it causes
        // unnecessary browser repaints.
        const documentStyles = getComputedStyle(rootElement)
        // We store the value in REM, so need to convert to pixels
        const currentValue = parseFloat(
            documentStyles.getPropertyValue(cssVariableName)
        ) * parseFloat(documentStyles.fontSize)

        const newValue = topNav.clientHeight

        if (newValue - 5 > currentValue) {
            console.log(`Updating ${cssVariableName} - overlapping`)
            rootElement.style.setProperty(
                cssVariableName, newValue + "px"
            );
        } else if (currentValue - newValue >= 30) {
            console.log(`Updating ${cssVariableName} - gap too large`)
            rootElement.style.setProperty(
                cssVariableName, newValue + "px"
            );
        }
    }

    /*************************************************************************/
    // After loading the page, and resizing the window, recalculate the nav bar
    // height.

    if (!permanentlyHidden) {
        // This height is approximately correct when there's a banner, so
        // shouldn't require any page reflow:
        rootElement.style.setProperty(
            '--navbarHeight', "5.5rem"
        );

        document.addEventListener("DOMContentLoaded", function() {
            updateNavbarHeight()
        });

        var interval = undefined

        window.addEventListener('resize', () => {
            if (interval) {
                clearTimeout(interval)
            }
            interval = setTimeout(() => {
                console.log("Finished resizing")
                updateNavbarHeight()
            }, 100)
        })
    }

    /*************************************************************************/

    PetiteVue.createApp({
        visible: !alreadyRead,
        permanentlyHidden: permanentlyHidden,
        bannerHiding: bannerHiding,
        $delimiters: ['[[', ']]'],
        toggleVisible() {
            this.visible = !this.visible

            if (this.visible) {
                clearRead()
            } else {
                setRead()
            }

            if (!this.visible && bannerHiding == 'permanent') {
                this.permanentlyHidden = true
            }

            // Run this after Vue has had time to update the DOM:
            setTimeout(
                updateNavbarHeight,
                0
            )
        }
    }).mount('#notification_banner')
})()
</script>
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="../index.html" title="Go to homepage">eformsign API ガイド</a></h1>
            <a id="source_link" href="https://www.eformsign.com/">
    
        <svg width="100%" height="100%" viewBox="0 0 92 92" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
            <path fill="white" d="M89.42,41.51l-39.794,-39.791c-2.29,-2.292 -6.006,-2.292 -8.299,-0l-8.263,8.264l10.481,10.482c2.437,-0.823 5.23,-0.271 7.171,1.67c1.952,1.954 2.5,4.771 1.657,7.216l10.102,10.102c2.444,-0.842 5.264,-0.298 7.215,1.657c2.729,2.728 2.729,7.148 0,9.876c-2.729,2.73 -7.148,2.73 -9.878,-0c-2.052,-2.053 -2.56,-5.067 -1.52,-7.595l-9.422,-9.422l-0.001,24.793c0.666,0.329 1.293,0.769 1.847,1.321c2.728,2.727 2.728,7.146 0,9.878c-2.728,2.727 -7.15,2.727 -9.876,-0c-2.728,-2.732 -2.728,-7.151 0,-9.878c0.675,-0.674 1.454,-1.183 2.287,-1.524l0,-25.023c-0.833,-0.34 -1.611,-0.846 -2.287,-1.524c-2.066,-2.065 -2.564,-5.098 -1.504,-7.635l-10.333,-10.335l-27.285,27.284c-2.291,2.294 -2.291,6.011 0,8.303l39.794,39.791c2.291,2.291 6.007,2.291 8.301,-0l39.607,-39.607c2.292,-2.293 2.292,-6.011 0,-8.303Z"/>
        </svg>
    
</a>
        

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="../search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="eformsign_api_overview.html">eformsign APIガイド</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">eformsign機能の埋め込み</a></li>
<li class="toctree-l1"><a class="reference internal" href="eformsign_api_quickstart.html">eformsign APIの始め方：実践ガイド</a></li>
<li class="toctree-l1"><a class="reference internal" href="eformsign_api.html">eformsign APIの使い方</a></li>
<li class="toctree-l1"><a class="reference internal" href="eformsign_webhook.html">eformsign Webhookの使い方</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="eformsign">
<h1>eformsign機能の埋め込み<a class="headerlink" href="#eformsign" title="Link to this heading"></a></h1>
<p>eformsignの機能をお客様の提供するサービス・サイト内に埋め込むことで、サービス・サイトを利用するユーザー（エンドユーザー）がeformsignのサイトに接続することなく、eformsignの電子帳票をご利用いただくことができます。</p>
<p>※ブログ内にYouTubeの動画を挿入するようなイメージです。</p>
<section id="id1">
<h2>チュートリアル<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<section id="id2">
<h3>概要<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>eformsignの埋め込みは、次のような機能に対応しています。</p>
<ul class="simple">
<li><p>テンプレートで文書作成</p></li>
<li><p>マイファイルで文書作成</p></li>
<li><p>文書の処理(入力・承認・差戻し)</p></li>
<li><p>文書のプレビュー</p></li>
<li><p>テンプレートの生成</p></li>
<li><p>テンプレートの修正</p></li>
<li><p>テンプレートの複製</p></li>
</ul>
<p>上記の機能を埋め込むためのオブジェクトは、現在EformSignDocumentとEformSignTemplateの2種類をご提供しています。各オブジェクトが対応している機能を確認し、インストールしてください。</p>
<section id="id3">
<h4>eformsignの埋め込みオブジェクト<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>オブジェクト名</p></th>
<th class="head"><p>対応機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EformSignDocument</p></td>
<td><ul class="simple">
<li><p>テンプレートで文書作成</p></li>
<li><p>文書の処理(入力・承認・差戻し)</p></li>
<li><p>文書のプレビュー</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>EformSignTemplate</p></td>
<td><ul class="simple">
<li><p>マイファイルで文書作成</p></li>
<li><p>テンプレートの生成</p></li>
<li><p>テンプレートの修正</p></li>
<li><p>テンプレートの複製</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id4">
<h3>インストール方法<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p>eformsignの機能を使用するウェブページに次のスクリプトを追加します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span><span class="nx">jQuery</span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">src</span><span class="o">=</span><span class="s2">&quot;https://www.eformsign.com/plugins/jquery/jquery.min.js&quot;</span><span class="o">/&gt;</span>
<span class="c">&lt;!--</span><span class="nx">EformSignDocumentオブジェクト</span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">src</span><span class="o">=</span><span class="s2">&quot;https://www.eformsign.com/lib/js/efs_embedded_v2.js&quot;</span><span class="o">/&gt;</span>
<span class="c">&lt;!--</span><span class="nx">EformSignTemplateオブジェクト</span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">src</span><span class="o">=</span><span class="s2">&quot;https://www.eformsign.com/lib/js/efs_embedded_form.js&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>eformsign機能を挿入するページにこのスクリプトを追加することで、eformsign埋め込み用オブジェクトをグローバル変数として使用することができます。
スクリプトはHTMLファイル内のhead、bodyなど、どの位置に追加しても構いませんが、eformsign埋め込み用オブジェクトを使用する前に先に宣言する必要があります。
jQueryの場合、すでに他の方法でウェブページに追加されているなら、重複して追加する必要はありません。</p>
</div>
</section>
</section>
<section id="id5">
<h2>埋め込みオプションの設定<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>eformsignの機能を埋め込む場合、埋め込む機能の詳細オプションをJSON形式で設定する必要があります。
会社情報、埋め込みモード、ユーザー情報、レイアウト、自動入力などを設定することができます。</p>
<section id="id6">
<h3><strong>各機能の設定値</strong><a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p>eformsignの機能埋め込みは、使用するオブジェクト、モードによって動作する機能が異なります。
以下の表から各機能で使用するオブジェクトと埋め込みモードをご確認ください。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>埋め込みモードの設定は、document_optionまたはtemplate_optionサブの&quot;mode&quot; Objectに値を入力することで行います。詳しい設定方法は各機能ページをご参照ください。</p>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>埋め込み可能</p></th>
<th class="head"><p>使用するオブジェクト</p></th>
<th class="head"><p>埋め込みモード</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>テンプレートで文書作成</p></td>
<td><p>EformSignDocument</p></td>
<td><p>&quot;type&quot;: &quot;01&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>文書の処理</p></td>
<td><p>EformSignDocument</p></td>
<td><p>&quot;type&quot;: &quot;02&quot;</p></td>
</tr>
<tr class="row-even"><td><p>文書のプレビュー</p></td>
<td><p>EformSignDocument</p></td>
<td><p>&quot;type&quot;: &quot;03&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>マイファイルで文書作成</p></td>
<td><p>EformSignTemplate</p></td>
<td><p>&quot;type&quot;: &quot;01&quot;, &quot;template_type&quot;: &quot;unstructured_form&quot;</p></td>
</tr>
<tr class="row-even"><td><p>テンプレートの生成</p></td>
<td><p>EformSignTemplate</p></td>
<td><p>&quot;type&quot;: &quot;01&quot;, &quot;template_type&quot;: &quot;form&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>テンプレートの修正</p></td>
<td><p>EformSignTemplate</p></td>
<td><p>&quot;type&quot;: &quot;02&quot;, &quot;template_type&quot;: &quot;form&quot;</p></td>
</tr>
<tr class="row-even"><td><p>テンプレートの複製</p></td>
<td><p>EformSignTemplate</p></td>
<td><p>&quot;type&quot;: &quot;03&quot;, &quot;template_type&quot;: &quot;form&quot;</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id7">
<h3><strong>必要な値の確認</strong><a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<p>埋め込みオプションを設定する際、挿入する機能によっては、会社ID、テンプレートID、文書IDを入力する必要があります。</p>
<section id="id">
<h4>会社IDの確認方法<a class="headerlink" href="#id" title="Link to this heading"></a></h4>
<p>会社IDは、会社管理者または代表管理者アカウントでログイン後、<strong>会社管理 &gt; 会社情報 &gt; 基本情報</strong>で会社IDを確認することができます。</p>
<ol class="arabic simple">
<li><p>eformsignのサイドバーメニューから <strong>会社情報</strong> メニューをクリックします。</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/Dashboard_sidemenu_companyinfo.png"><img alt="eformsign　会社情報メニュー" src="../_images/Dashboard_sidemenu_companyinfo.png" style="width: 700px;" />
</a>
<ol class="arabic simple" start="2">
<li><p><strong>会社情報 &gt; 基本情報</strong>から <strong>会社ID</strong>を確認します。</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/companyinfo_companyid.png"><img alt="会社情報 &gt; 基本情報" src="../_images/companyinfo_companyid.png" style="width: 700px;" />
</a>
</section>
<section id="id8">
<h4>テンプレートIDの確認方法<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<p>テンプレート管理メニューに移動し、テンプレートの設定アイコンをクリックすると、テンプレートのURLからform_idを確認することができます。</p>
<ol class="arabic simple">
<li><p>eformsignサイドバーメニューの <strong>テンプレート管理</strong>をクリックします。</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/sidemenu_managetemplate.png"><img alt="eformsign メニュー、テンプレート管理" src="../_images/sidemenu_managetemplate.png" style="width: 700px;" />
</a>
<ol class="arabic simple" start="2">
<li><p>eformsignテンプレート管理画面で、当該テンプレートの <strong>設定</strong> ボタンをクリックします。</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/managetemplate.png"><img alt="eformsign テンプレート管理画面" src="../_images/managetemplate.png" style="width: 700px;" />
</a>
<ol class="arabic simple" start="3">
<li><p>テンプレートのURLから <strong>テンプレートID(=form_id)</strong>を確認します。</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/templateURL_templateID.png"><img alt="テンプレートIDの位置" src="../_images/templateURL_templateID.png" style="width: 700px;" />
</a>
</section>
<section id="id9">
<h4>文書IDの確認方法<a class="headerlink" href="#id9" title="Link to this heading"></a></h4>
<p>文書IDは、文書が存在する文書トレイから確認できます。</p>
<p>1.eformsignサイドバーのメニューから <strong>文書が存在する文書トレイ</strong> メニューをクリックします。</p>
<a class="reference internal image-reference" href="../_images/sidemenu_documentinbox.png"><img alt="eformsign メニュー　テンプレート管理" src="../_images/sidemenu_documentinbox.png" style="width: 700px;" />
</a>
<p>2.文書トレイの右上の <strong>カラム選択アイコン</strong> (<a class="reference internal" href="../_images/column_icon.png"><img alt="image1" src="../_images/column_icon.png" style="width: 25px;" /></a>)をクリック後、文書IDをチェックすると、リストに <strong>文書ID</strong> の列が追加され、文書IDを確認することができます。</p>
<a class="reference internal image-reference" href="../_images/document_id_column.png"><img alt="eformsign 文書トレイ　文書ID列の追加" src="../_images/document_id_column.png" style="width: 700px;" />
</a>
</section>
</section>
<section id="id10">
<h3>テンプレート文書作成、文書の処理、文書のプレビュー<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<p>eformsignを埋め込んでテンプレートで文書の作成・受信した文書の処理・生成された文書のプレビュー機能を挿入する場合について説明します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignDocument</span><span class="p">();</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;company&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">            </span><span class="c1">// Company IDを入力</span>
<span class="w">      </span><span class="s2">&quot;country_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// 国コードを入力 (例: ja)</span>
<span class="w">      </span><span class="s2">&quot;user_key&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">        </span><span class="c1">// 顧客側のシステムにログインしたユーザーのunique key. ブラウザクッキーのeformsignログイン情報との比較に使用</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="s2">&quot;user&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="w"> </span><span class="p">,</span><span class="w">         </span><span class="c1">// ユーザーの識別 (01: メンバー、02: 外部者)</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test1@forcs.com&quot;</span><span class="w"> </span><span class="c1">// ユーザーID（メールアドレス）</span>
<span class="w">        </span><span class="s2">&quot;access_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// Access Tokenの入力（eformsign APIの使い方 - Access Tokenの発行を参照）</span>
<span class="w">        </span><span class="s2">&quot;refresh_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// Refresh Tokenの入力（eformsign APIの使い方 - Access Tokenの発行を参照）</span>
<span class="w">        </span><span class="s2">&quot;external_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// 外部者が処理する際に、ユーザーを認証するExternal Tokenを入力（Webhookから提供）</span>
<span class="w">        </span><span class="s2">&quot;external_user_info&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">          </span><span class="c1">// 外部者が処理する際に、外部者の名前を入力</span>

<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;02&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// モード (01: 文書の新規作成、02: 文書の検討、03: 文書のプレビュー)</span>
<span class="w">        </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// template idの入力</span>
<span class="w">        </span><span class="s2">&quot;document_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">  </span><span class="c1">// document_idの入力</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;layout&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;lang_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="w"> </span><span class="c1">// eformsignの言語 ja, en, ko</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;document_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 文書タイトルの入力</span>
<span class="w">        </span><span class="s2">&quot;fields&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="s2">&quot;顧客名&quot;</span><span class="p">,</span><span class="w">       </span><span class="c1">// フィールド名</span>
<span class="w">                </span><span class="s2">&quot;value&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// フィールド値</span>
<span class="w">                </span><span class="s2">&quot;enabled&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">   </span><span class="c1">// true:活性化 false:非活性化</span>
<span class="w">                </span><span class="s2">&quot;required&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w">   </span><span class="c1">// true:入力必須 false:入力任意</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;recipients&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_idx&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="p">,</span><span class="w">       </span><span class="c1">// ワークフローの順序。受信者がいる場合は２からスタート</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;06&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// ステップの種類 05: 参加者、06: 検討者</span>
<span class="w">                </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;田中太郎&#39;</span><span class="p">,</span><span class="w">        </span><span class="c1">// 受信者の氏名</span>
<span class="w">                </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test@forcs.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 受信者ID/メールアドレス</span>
<span class="w">                </span><span class="s2">&quot;sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01023456789&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// 受信者の携帯電話番号</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">       </span><span class="c1">// true: メール通知を使用 false: 不使用</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">        </span><span class="c1">// true: SMS通知を使用 false: 不使用</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1">// ワークフロー設定で文書のプレビュー前に本人確認の設定 - 本人確認情報にチェックした場合、パスワードを入力</span>
<span class="w">                    </span><span class="s2">&quot;password_hint&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="c1">// 上記の条件に従ってパスワードを入力する際、表示されるパスワードのヒント</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w">       </span><span class="c1">// 文書の送信期限 (日)</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w">       </span><span class="c1">// 文書の送信期限 (時間)</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;comment&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ここにコメントを入力&quot;</span><span class="w">     </span><span class="c1">// メッセージ</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;return_fields&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;顧客名&#39;</span><span class="p">]</span><span class="w">           </span><span class="c1">// Success Callbackで値を確認するためのフィールド名</span>
<span class="p">};</span>

<span class="c1">//callback option</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">success_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-1&quot;</span><span class="p">){</span>
<span class="w">        </span><span class="c1">// 文書作成に成功</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">document_id</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// return_fieldsに渡したデータの表示が可能。 fieldsはフォームを作成する際の入力コンポーネントのIDに当たる。</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">field_values</span><span class="p">[</span><span class="s2">&quot;company_name&quot;</span><span class="p">]);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">field_values</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// 文書作成に失敗</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">};</span>


<span class="kd">var</span><span class="w"> </span><span class="nx">action_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="nx">document_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">action_callback</span><span class="p">);</span>
<span class="nx">eformsign</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
</pre></div>
</div>
<section id="document-option">
<h4>document_option<a class="headerlink" href="#document-option" title="Link to this heading"></a></h4>
<p>オプション設定のためのJSONは次のような構造になっています。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データ型</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>下位オプション</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>company</p></td>
<td><p>会社情報</p></td>
<td><p>Object</p></td>
<td><p>O</p></td>
<td><p>id, country_code, user_key</p></td>
</tr>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>組み込みモード</p></td>
<td><p>Object</p></td>
<td><p>O</p></td>
<td><p>type, template_id, document_id</p></td>
</tr>
<tr class="row-even"><td><p>user</p></td>
<td><p>ユーザー情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>type, id, access_token, refresh_token, external_token, external_user_info</p></td>
</tr>
<tr class="row-odd"><td><p>layout</p></td>
<td><p>レイアウト</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>lang_code</p></td>
</tr>
<tr class="row-even"><td><p>prefill</p></td>
<td><p>自動記入</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>document_name, fields, recipients, comment</p></td>
</tr>
<tr class="row-odd"><td><p>return_fields</p></td>
<td><p>returnフィールド</p></td>
<td><p>Array</p></td>
<td><p>X</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>会社情報とモードは入力必須項目です。</p>
</div>
<section id="company">
<h5>1．company(会社情報/必須)<a class="headerlink" href="#company" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データ型</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>会社ID</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>会社管理 - 会社情報から確認</p></td>
</tr>
<tr class="row-odd"><td><p>country_code</p></td>
<td><p>国コード</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>会社管理 - 会社情報の国コードを指定。任意入力項目だが、入力後即open可能</p></td>
</tr>
<tr class="row-even"><td><p>user_key</p></td>
<td><p>顧客システムユーザー固有キー</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>組み込みをする顧客のシステム上で、対象のユーザーが誰かを明らかにするため、eformsignに渡すユーザーのアカウント情報</p>
<p>ブラウザに既にログイン情報がある場合、対象のkeyと比較を行う。ログイン情報と対象のkeyが一致しない場合、自動的にログアウトする。</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;company&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;f9aec832efef4133a1e849efaf8a9aed&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;country_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;user_key&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
</section>
<section id="mode">
<h5>2．mode(埋め込みモード/必須)<a class="headerlink" href="#mode" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データ型</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>機能タイプ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>01: 文書作成、02: 文書処理、03: プレビュー</p></td>
</tr>
<tr class="row-odd"><td><p>template_id</p></td>
<td><p>テンプレートID</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>document_id</p></td>
<td><p>文書ID</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>文書処理、プレビュー設定時には必須</p></td>
</tr>
</tbody>
</table>
<p><strong>テンプレートを利用した新規作成</strong></p>
<p>テンプレートを利用して文書を新規作成します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="c1">// 01 : 文書作成、02 : 文書処理、03 : プレビュー</span>
<span class="w">    </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;a2c6ed9df9b642f2ade43c7efe58c9a3&quot;</span><span class="w"> </span><span class="c1">// template idを入力</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>受信した文書を利用した文書作成</strong></p>
<p>受信した文書を利用して、新たに文書を作成します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;02&quot;</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="c1">// 01 : 文書作成、02 : 文書処理、03 : プレビュー</span>
<span class="w">    </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;a2c6ed9df9b642f2ade43c7efe58c9a3&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// template idの入力</span>
<span class="w">    </span><span class="s2">&quot;document_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5c19ff8c703f401c968236837d701e92&quot;</span><span class="w">  </span><span class="c1">// document_idの入力</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>特定の文書をプレビュー</strong></p>
<p>作成済みの文書をプレビューします。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;03&quot;</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="c1">// 01 : 文書作成、02 : 文書処理、03 : プレビュー</span>
<span class="w">    </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;a2c6ed9df9b642f2ade43c7efe58c9a3&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// template idの入力</span>
<span class="w">    </span><span class="s2">&quot;document_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5c19ff8c703f401c968236837d701e92&quot;</span><span class="w">  </span><span class="c1">// document_idの入力</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="user">
<h5>3．user（ユーザー情報/任意）<a class="headerlink" href="#user" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データ型</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>ユーザータイプ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>01: 会社メンバー</p>
<p>02: 外部作成者</p>
</td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>アカウント（メールアドレス）</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>ユーザーID/メールアドレスの入力</p></td>
</tr>
<tr class="row-even"><td><p>access_token</p></td>
<td><p>Access Token</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>Open API &gt; <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Token 発行</a>を参照</p></td>
</tr>
<tr class="row-odd"><td><p>refresh_token</p></td>
<td><p>Refresh Token</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>Open API &gt; <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Token 発行</a>を参照</p></td>
</tr>
<tr class="row-even"><td><p>external_token</p></td>
<td><p>外部者処理用トークン</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>メンバーではないユーザーが受信した文書を検討する際は必須入力（<a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_webhook.html">Webhook</a>で提供）</p></td>
</tr>
<tr class="row-odd"><td><p>external_user_info</p></td>
<td><p>外部作成者の情報</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>メンバーではないユーザーが受信した文書を作成及び処理する際は必須入力</p></td>
</tr>
<tr class="row-even"><td><p>external_user_info.name</p></td>
<td><p>外部作成者の氏名</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>メンバーではないユーザーが受信した文書を作成及び処理する際は必須入力</p></td>
</tr>
</tbody>
</table>
<p><strong>会社のメンバーのログインによる文書の作成及び処理</strong></p>
<ul class="simple">
<li><p>ユーザー情報を指定していない場合に該当します。</p></li>
<li><p>eformsignのログインページが起動し、ログイン後に文書を作成することができます。</p></li>
</ul>
<p><strong>会社のメンバーのログインによる文書の作成及び検討（IDの事前入力)</strong></p>
<p>eformsignのログインページが起動し、ログイン後に文書を作成することができます。この際、IDがログイン画面にあらかじめ入力されます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>会社のメンバーのトークンを利用した作成及び処理</strong></p>
<p>埋め込みの際、eformsignにログインすることなく、特定のアカウントのトークンを利用して文書を作成し、受信した文書を作成します。- トークンは、Open APIのAccess tokenで発行可能です。
トークンの発行方法は eformsign APIの使い方 - <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Tokenの発行</a>をご確認ください。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;access_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJlZ...&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;refresh_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;0161ac6c-0f47-4cc3-9301-381f57c41495&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>メンバーではないユーザーが文書を新規作成</strong></p>
<p>eformsignの会員ではないユーザーが文書を作成することができます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;02&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;external_user_info&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;田中太郎&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>メンバーではないユーザーが受信した文書に入力</strong></p>
<p>eformsignのメンバーではないユーザーが、受信した文書に入力することができます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;02&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;external_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;f8e2ff29114445dcac1e2889ac2f8a5e&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;external_user_info&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;田中太郎&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="layout">
<h5>4．layout(レイアウト/任意)<a class="headerlink" href="#layout" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データ型</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lang_code</p></td>
<td><p>eformsign言語</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>ja: 日本語、en: 英語、ko: 韓国語</p></td>
</tr>
<tr class="row-odd"><td><p>header</p></td>
<td><p>ヘッダの表示ON/OFF</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>未入力時のデフォルト値: true</p>
<p>ヘッダを非表示(false)にした場合、 '送信' の同意ボタンも非表示となるため、別途ボタンの配置が必要</p>
<p>(<a class="reference external" href="#creating-button">画面ロード時のアクションボタン生成</a>を参照)</p>
</td>
</tr>
<tr class="row-even"><td><p>footer</p></td>
<td><p>フッタの表示有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>未入力時のデフォルト値: true</p></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;layout&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;lang_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;header&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;footer&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="prefill">
<h5>5．prefill(自動入力/任意)<a class="headerlink" href="#prefill" title="Link to this heading"></a></h5>
<p>文書の作成中に自動でされる情報を設定します。</p>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>mode.typeが &quot;03&quot;の場合(文書のプレビュー時)には、自動入力はされません。</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 18.8%" />
<col style="width: 12.5%" />
<col style="width: 6.2%" />
<col style="width: 37.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データ型</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>document_name</p></td>
<td><p>文書タイトル</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fields</p></td>
<td><p>フィールドリスト</p></td>
<td><p>Array</p></td>
<td><p>X</p></td>
<td><p>フィールド設定Objectのリスト</p></td>
</tr>
<tr class="row-even"><td><p>fields[].id</p></td>
<td><p>フィールド名</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>フィールド設定Object内では必須（フィールド名をもとに設定を適用)</p></td>
</tr>
<tr class="row-odd"><td><p>fields[].value</p></td>
<td><p>フィールド値</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>設定しない場合、新規作成時にテンプレートのフィールド設定オプションを利用</p></li>
<li><p>設定した場合、テンプレートのフィールド設定よりも優先して適用</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>fields[].enabled</p></td>
<td><p>フィールドの活性化</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>指定しない場合、テンプレート設定の項目制御オプションを適用</p></li>
<li><p>指定した場合、テンプレートの項目制御オプションよりも優先して適用</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>fields[].required</p></td>
<td><p>フィールド必須/任意</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>指定しない場合、テンプレート設定の項目制御オプションを適用</p></li>
<li><p>指定した場合、テンプレートの項目制御オプションよりも優先して適用</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>recipients</p></td>
<td><p>受信者リスト</p></td>
<td><p>Array</p></td>
<td><p>X</p></td>
<td><p>受信者情報Objectのリスト</p></td>
</tr>
<tr class="row-odd"><td><p>recipients[].step_idx</p></td>
<td><p>ワークフローの順序</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>recipients内の各オブジェクトに設定必須</p>
<ul class="simple">
<li><p>1人目の受信者: &quot;2&quot;</p></li>
<li><p>2人目以降の受信者: 3、4...と順番に沿って1ずつ増加</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>recipients[].step_type</p></td>
<td><p>受信者のステップ種類</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>recipients内の各オブジェクトに設定必須</p>
<ul class="simple">
<li><p>既存ワークフロー: &quot;01&quot;（完了）、&quot;02&quot;（決裁）、&quot;03&quot;（外部受信者）、&quot;04&quot;(内部受信者)</p></li>
<li><p>新規ワークフロー: &quot;01&quot;（完了）、&quot;05&quot;（参加者）、&quot;06&quot;（検討者）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>recipients[].recipient_type</p></td>
<td><p>受信者の種類</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>step_typeが、02(決裁), 03(外部受信者), 04(内部受信者)の場合にのみ入力必須</p>
<ul class="simple">
<li><p>&quot;01&quot;: 受信者がメンバーの場合</p></li>
<li><p>&quot;02&quot;: 外部受信者の場合</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>recipients[].name</p></td>
<td><p>受信者の氏名</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].id</p></td>
<td><p>アカウント（メールアドレス）</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>会社のメンバーのアカウント情報（ID/メールアドレス）の入力</p></li>
<li><p>step_typeが05（参加者）もしくは06（検討者）である場合、メンバーではなくてもメールアドレスの入力が可能</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>recipients[].email</p></td>
<td><p>メールアドレス</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>step_typeが03(外部受信者)の場合にのみ使用</p>
<ul class="simple">
<li><p>外部受信者のメールアドレス入力</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>recipients[].sms</p></td>
<td><p>携帯電話番号</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>recipients[].use_mail</p></td>
<td><p>メールの送信有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>step_typeが05(参加者)または06(検討者)の場合にのみ使用</p></td>
</tr>
<tr class="row-odd"><td><p>recipients[].use_sms</p></td>
<td><p>SMS送信</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>step_typeが05(参加者)または06(検討者)の場合にのみ使用</p></td>
</tr>
<tr class="row-even"><td><p>recipients[].auth</p></td>
<td><p>本人確認及び文書の送信期限情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].auth.password</p></td>
<td><p>本人確認情報（パスワード）</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>ワークフローの設定における本人確認を設定</p></li>
<li><p>本人確認情報にチェックを入れた場合、パスワードを入力</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>recipients[].auth.password_hint</p></td>
<td><p>本人確認情報のヘルプ(パスワードのヒント)</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>上記条件に従ってパスワードを入力する際、表示されるパスワードのヒント</p></td>
</tr>
<tr class="row-odd"><td><p>recipients[].auth.valid</p></td>
<td><p>文書の送信期限情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>未入力時の初期値: 0日0時間（メンバーである場合は無制限、外部受信者の場合は画面上再入力が必要）</p></td>
</tr>
<tr class="row-even"><td><p>recipients[].auth.valid.day</p></td>
<td><p>文書の送信期限（日）</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].auth.valid.hour</p></td>
<td><p>文書の送信期限（時間）</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>comment</p></td>
<td><p>次の受信者に伝えるメッセージ</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;document_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;個人情報取扱同意書&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// 文書タイトルの入力</span>
<span class="w">        </span><span class="s2">&quot;fields&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="s2">&quot;顧客名&quot;</span><span class="p">,</span><span class="w">       </span><span class="c1">// フィールド名</span>
<span class="w">                </span><span class="s2">&quot;value&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// フィールド値</span>
<span class="w">                </span><span class="s2">&quot;enabled&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">   </span><span class="c1">// 活性化</span>
<span class="w">                </span><span class="s2">&quot;required&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w">   </span><span class="c1">// 必須</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;recipients&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_idx&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="p">,</span><span class="w">       </span><span class="c1">// ワークフローの順番。受信者がいる場合２からスタート</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;06&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// ステップの種類。 05: 参加者、06: 検討者</span>
<span class="w">                </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span><span class="w">        </span><span class="c1">// 受信者の名前</span>
<span class="w">                </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test@forcs.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 受信者のID/メールアドレス</span>
<span class="w">                </span><span class="s2">&quot;sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01023456789&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// 受信者の携帯電話番号</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">       </span><span class="c1">// メール通知の使用</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">        </span><span class="c1">// SMS通知の使用</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;6789&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// ワークフローの設定における本人確認を設定 - 本人確認情報にチェックを入れた場合、パスワードを入力</span>
<span class="w">                    </span><span class="s2">&quot;password_hint&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;携帯番号の下3桁を入力してください。&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 上記条件に従ってパスワードを入力する際、表示されるパスワードのヒント</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w">       </span><span class="c1">// 文書の送信期限（日）</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w">       </span><span class="c1">// 文書の送信期限（時間）</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;comment&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;確認及び署名をお願いします。&quot;</span><span class="w">  </span><span class="c1">// メッセージ</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="return-fields">
<h5>6．return_fields(リターンフィールド/任意）<a class="headerlink" href="#return-fields" title="Link to this heading"></a></h5>
<p>文書の作成及び修正後、ユーザーが作成したフィールドの内容のうちcallback関数でリターンする項目を設定します。
&quot;return_fields&quot; Array 内にフィールド名をString型で入力します。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>設定しない場合、基本フィールドの情報のみリターンします。詳しい情報は <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_embedding.html#success-fail">作業成功失敗時</a>callBackパラメータをご参照ください。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>mode.typeが&quot;03&quot;の場合(文書のプレビュー時)には動作しません。</p>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;return_fields&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;顧客名&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id12">
<h3>マイファイルで文書作成<a class="headerlink" href="#id12" title="Link to this heading"></a></h3>
<p>eformsignを埋め込むことで、マイファイル作成機能を使用することができます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignTemplate</span><span class="p">();</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;company&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;76440d70fae242e09c4b0fac40b6a6be&quot;</span><span class="p">,</span><span class="w">            </span><span class="c1">// Company IDを入力</span>
<span class="w">      </span><span class="s2">&quot;country_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// 国コードを入力 (例: ja)</span>
<span class="w">      </span><span class="s2">&quot;user_key&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">        </span><span class="c1">// 埋め込んだ顧客側システムにログインしたユーザーのunique key。ブラウザのクッキーのeformsignログイン情報と比較。</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="s2">&quot;user&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test1@forcs.com&quot;</span>
<span class="w">        </span><span class="s2">&quot;access_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// Access Tokenを入力 (OpenAPI Access Tokenを参照)</span>
<span class="w">        </span><span class="s2">&quot;refresh_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// Refresh Tokenを入力 (OpenAPI Access Tokenを参照)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// 01 : 生成</span>
<span class="w">        </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// template idを入力</span>
<span class="w">        </span><span class="s2">&quot;template_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;unstructured_form&quot;</span><span class="w">    </span><span class="c1">// form : テンプレート管理, unstructured_form: マイファイルで文書作成</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;layout&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;lang_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// eformsignの表示言語. ja, en, ko</span>
<span class="w">        </span><span class="s2">&quot;header&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">    </span><span class="c1">// ヘッダ(青色)の表示有無。非表示の場合アクションボタンから送信などの操作が可能</span>
<span class="w">        </span><span class="s2">&quot;footer&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w">     </span><span class="c1">// フッタ(eformsignのロゴ、言語設定など)の表示有無</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;テンプレート埋め込みテスト_新規&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;fields&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;テキスト1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;あいうえお&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;enabled&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;required&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;テキスト2&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;かきくけこ&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;enabled&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;required&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 05: 参加者, 06: 検討者</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者2&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipients&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test2@forcs.com&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;John Doe&#39;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5a3e47a2f5a04909836ddf4189d10fc4&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;グループ3&#39;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;7&#39;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;7&#39;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="s2">&quot;additional_auth&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// 追加認証手段</span>
<span class="w">                    </span><span class="nx">use_pincode</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">//メール/SMS PINコード認証</span>
<span class="w">                    </span><span class="nx">use_pincode_result</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">//文書の最終完了時、メール/SMS PINコードで認証</span>
<span class="w">                    </span><span class="nx">use_mobile_verifyAuth</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">//携帯電話本人確認</span>
<span class="w">                    </span><span class="nx">use_mobile_verifyAuth_result</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">//文書の最終完了時、携帯電話本人確認を使用</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;is_form_id_numbering&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;disabled_form_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;quick_processing&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;template_file&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;添付テスト.pdf&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;mime&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;@file/octet-stream&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;JVBERi0xLjUNCiW1tbW1DQoxIDAgb2JqDQo8PC9UeXBlL0NhdGFsb2cvUGFnZXMgMiAwIFIvTGFuZyhrby1LUikgL1N0cnVjdFRyZWVSb290IDE1IDAgUi...&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">//callback option</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">sucess_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="s1">&#39;template&#39;</span><span class="p">){</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">template_id</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">template_name</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">step_settings</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートが生成されました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- document_id : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">template_id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- title : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">template_name</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートの生成に失敗しました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- code : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- message : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="p">};</span>


<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートの生成に失敗しました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- code : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- message : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">action_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">template_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">action_callback</span><span class="p">);</span>
<span class="nx">eformsign</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
</pre></div>
</div>
<section id="template-option">
<h4>template_option<a class="headerlink" href="#template-option" title="Link to this heading"></a></h4>
<p>オプション設定のためのJSONは次のような構造になっています。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>下位オプション</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>company</p></td>
<td><p>会社情報</p></td>
<td><p>Object</p></td>
<td><p>O</p></td>
<td><p>id, country_code, user_key</p></td>
</tr>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>埋め込みモード</p></td>
<td><p>Object</p></td>
<td><p>O</p></td>
<td><p>type, template_id, document_id</p></td>
</tr>
<tr class="row-even"><td><p>user</p></td>
<td><p>ユーザー情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>type, id, access_token, refresh_token, external_token, external_user_info</p></td>
</tr>
<tr class="row-odd"><td><p>layout</p></td>
<td><p>レイアウト</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>lang_code</p></td>
</tr>
<tr class="row-even"><td><p>prefill</p></td>
<td><p>自動入力</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>document_name, fields, recipients, comment</p></td>
</tr>
<tr class="row-odd"><td><p>template_file</p></td>
<td><p>テンプレートファイル</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>name, mime, data</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>会社情報とモードは必須入力項目です。</p>
</div>
<section id="id13">
<h5>1. company(会社情報/必須)<a class="headerlink" href="#id13" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>会社ID</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>会社管理 - 会社情報で確認</p></td>
</tr>
<tr class="row-odd"><td><p>country_code</p></td>
<td><p>国コード</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>会社管理 - 会社情報の国に対するコードを指定。任意項目ですが、openが高速化</p></td>
</tr>
<tr class="row-even"><td><p>user_key</p></td>
<td><p>顧客システムユーザー固有キー</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>埋め込みする顧客システムでユーザーが誰か明確に設定するためにeformsignに残すユーザーアカウント情報</p>
<p>既にブラウザにログイン情報がある場合、keyと比較して一致しない場合にログアウト処理</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="s2">&quot;company&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;f9aec832efef4133a1e849efaf8a9aed&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s2">&quot;country_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="s2">&quot;user_key&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span>
<span class="w">     </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id14">
<h5>2. mode(埋め込みモード/必須)<a class="headerlink" href="#id14" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>機能タイプ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>01: 生成</p></td>
</tr>
<tr class="row-odd"><td><p>template_type</p></td>
<td><p>埋め込みタイプ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>&quot;unstructured_form&quot;: マイファイルで文書作成</p></td>
</tr>
</tbody>
</table>
<p><strong>マイファイルで文書作成</strong></p>
<p>マイファイルで文飾作成により、文書を新規作成します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;template_type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;unstructured_form&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id15">
<h5>3. user(ユーザー情報/任意)<a class="headerlink" href="#id15" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>アカウント(メールアドレス)</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>ユーザーID/メールアドレスを入力</p></td>
</tr>
<tr class="row-odd"><td><p>access_token</p></td>
<td><p>Access Token</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>Open API &gt; <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Tokenを発行</a></p></td>
</tr>
<tr class="row-even"><td><p>refresh_token</p></td>
<td><p>Refresh Token</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>Open API &gt; <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Tokenを発行</a></p></td>
</tr>
</tbody>
</table>
<p><strong>社内メンバーのログインによる作業(IDの事前入力)</strong></p>
<p>埋め込みの際、eformsignのログインページが起動し、ログイン後にテンプレート管理を行うことができます。この際、IDがログイン画面に自動入力されます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>社内メンバーのトークンによる作業</strong></p>
<p>埋め込みの際、eformsignにログインせず、アカウントのtokenを使ってテンプレート管理を行います。
トークンの発行方法はeformsign APIの使い方 - <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Tokenの発行</a>をご参照ください。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;access_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJlZ...&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;refresh_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;0161ac6c-0f47-4cc3-9301-381f57c41495&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id16">
<h5>4. layout(レイアウト/任意)<a class="headerlink" href="#id16" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lang_code</p></td>
<td><p>eformsignの言語</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>ja: 日本語, en: 英語, ko: 韓国語</p></td>
</tr>
<tr class="row-odd"><td><p>header</p></td>
<td><p>ヘッダの表示有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: true</p>
<p>ヘッダを非表示(false)にした場合、「送信」などのボタンも非表示になるため、別途ボタンの生成が必要</p>
<p>(<a class="reference external" href="#creating-button">画面ロード時のアクションボタン生成</a>)</p>
</td>
</tr>
<tr class="row-even"><td><p>footer</p></td>
<td><p>フッタの表示有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: true</p></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;layout&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;lang_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;header&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;footer&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id17">
<h5>5. prefill(自動入力/任意)<a class="headerlink" href="#id17" title="Link to this heading"></a></h5>
<p>文書作成中に自動入力を行う場合に使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.8%" />
<col style="width: 16.3%" />
<col style="width: 6.1%" />
<col style="width: 8.2%" />
<col style="width: 28.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>template_name</p></td>
<td><p>文書タイトル</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fields</p></td>
<td><p>文書作成時のデフォルト値リスト</p></td>
<td><p>Array</p></td>
<td><p>X</p></td>
<td><p>フィールド設定Objectのリスト</p></td>
</tr>
<tr class="row-even"><td><p>fields[].id</p></td>
<td><p>デフォルト値を入力するフィールド名</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fields[].value</p></td>
<td><p>フィールドに入力するデフォルト値</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fields[].enabled</p></td>
<td><p>文書作成時のフィールド活性化有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>指定しない場合、「デザインする」ステップの項目制御オプションを適用</p></li>
<li><p>設定する場合、「デザインする」ステップの項目制御オプションより優先して適用</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>fields[].required</p></td>
<td><p>文書作成時のフィールド必須入力有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>指定しない場合、「デザインする」ステップの項目制御オプションを適用</p></li>
<li><p>設定する場合、「デザインする」ステップの項目制御オプションより優先して適用</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>step_settings</p></td>
<td><p>ワークフローステップのリスト</p></td>
<td><p>Array</p></td>
<td><p>X</p></td>
<td><p>ステップ情報Objectのリスト</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].step_type</p></td>
<td><p>ワークフロー受信者のタイプ</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>旧ワークフロー: &quot;02&quot;(決裁), &quot;03&quot;(内部受信者), &quot;04&quot;(外部受信者)</p></li>
<li><p>現行ワークフロー: &quot;05&quot;(参加者), &quot;06&quot;(検討者)</p></li>
</ul>
<p>step_settings内の各オブジェクトに入力必須</p>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].step_name</p></td>
<td><p>ワークフローステップ名</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].selected</p></td>
<td><p>「デザインする」ステップで デフォルトの文書参加者の表示有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>入力しない場合、デフォルト値に設定: false</p></li>
<li><p>すべてのステップで未入力/falseの場合、開始/送信者ステップをデフォルトで表示</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient</p></td>
<td><p>受信者情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>受信者情報</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.id</p></td>
<td><p>受信者メールアドレスまたはID</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>特定ステップの受信者のメールアドレスかIDを入力</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.name</p></td>
<td><p>受信者名</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.sms</p></td>
<td><p>受信者の携帯電話番号</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>&quot;+819022223333&quot; の形式で入力</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.use_mail</p></td>
<td><p>メールの送信有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.use_sms</p></td>
<td><p>SMSの送信有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.use_alimtalk</p></td>
<td><p>SMS送信時カカオトークの使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p>
<p>trueに設定時、カカオトークで送信、失敗時にSMSで送信</p>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.auth</p></td>
<td><p>本人確認及び文書の送信期限情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>type, password, password_hintがすべて入力されていない場合: 本人確認情報を使用しない</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.auth.type</p></td>
<td><p>本人確認方法</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: password (type, password, password_hintがすべて入力されていない場合: 本人確認情報を使用しない)</p>
<ul class="simple">
<li><p>qna: 受信者名</p></li>
<li><p>field: 入力フィールドの中から選択</p></li>
<li><p>password: 送信者が入力</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.auth.password</p></td>
<td><p>本人確認情報</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: 値なし</p>
<ul class="simple">
<li><p>typeがqnaの場合: 空欄にする</p></li>
<li><p>typeがfieldの場合: フィールド名を入力</p></li>
<li><p>typeがpasswordの場合: 空欄にする</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.auth.password_hint</p></td>
<td><p>本人確認情報のヒント</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: 値なし</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.auth.valid</p></td>
<td><p>文書の送信期限情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: 7日 0時間</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.auth.valid.day</p></td>
<td><p>文書の送信期限 (日)</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.auth.valid.hour</p></td>
<td><p>文書の送信期限 (時間)</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.additional_auth</p></td>
<td><p>追加認証手段 (非定型)</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.additional_auth.use_pincode</p></td>
<td><p>メール/SMS 認証の使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.additional_auth.use_pincode_result</p></td>
<td><p>完了文書の閲覧の際にも メール/SMS 認証使用の有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient.additional_auth.use_mobile_verifyAuth</p></td>
<td><p>携帯電話本人確認の使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient.additional_auth.use_mobile_verifyAuth_result</p></td>
<td><p>完了文書の閲覧の際にも 携帯電話本人確認の使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>is_form_id_numbering</p></td>
<td><p>コンポーネントの追加の際に デフォルトIDから番号付与の有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>テキストコンポーネントの追加の際、コンポーネントIDのデフォルト値</p>
<ul class="simple">
<li><p>is_form_id_numberingがtrueの場合: 'テキスト1', 'テキスト2', 'テキスト3'</p></li>
<li><p>is_form_id_numberingがfalseの場合: 'テキスト', 'テキスト', 'テキスト'</p></li>
</ul>
<p>入力しない場合、デフォルト値に設定: true</p>
</td>
</tr>
<tr class="row-even"><td><p>disabled_form_id</p></td>
<td><p>「デザインする」ステップで コンポーネントIDの非活性化有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p></td>
</tr>
</tbody>
</table>
<p><strong>文書名の入力</strong></p>
<p><strong>オプション &gt; 文書タイトル</strong>に購入申請書が入力されます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;prefill&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;購入申請書&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>文書参加者と受信者の指定(本人確認情報、追加認証手段の不使用時)</strong></p>
<p>以下のようにワークフローのステップを追加します。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステップの種類: 参加者</p></li>
<li><p>ステップ名: 参加者1</p></li>
<li><p>メール通知: 使用</p></li>
<li><p>SMS通知: 不使用</p></li>
<li><p>受信者名: 鈴木三郎</p></li>
<li><p>受信者メールアドレス: <a class="reference external" href="mailto:test1&#37;&#52;&#48;forcs&#46;com">test1<span>&#64;</span>forcs<span>&#46;</span>com</a></p></li>
<li><p>依頼の有効期間: 7日 7時間</p></li>
<li><p>本人確認情報: 不使用</p></li>
<li><p>追加認証手段: 不使用</p></li>
</ul>
</div></blockquote>
<p>埋め込み実行時には以下のように実行されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>文書参加者: 2名 (送信者、参加者1)</p></li>
<li><p>「デザインする」ステップでデフォルトで表示する文書参加者: 送信者</p></li>
<li><p>ワークフロー: 送信者-参加者 1-完了</p></li>
</ul>
</div></blockquote>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者 1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;selected&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipient&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test1@forcs.com&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;鈴木三郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;7&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;7&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>文書の参加者と受信者の指定(本人確認情報、追加認証手段の使用時)</strong></p>
<p>次のようにワークフローのステップを追加します。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステップの種類</p></li>
<li><p>ステップ名: 参加者1</p></li>
<li><p>メール通知: 使用</p></li>
<li><p>SMS通知: 使用(カカオトーク優先)</p></li>
<li><p>受信者名: 鈴木三郎</p></li>
<li><p>受信者メールアドレス: <a class="reference external" href="mailto:test1&#37;&#52;&#48;forcs&#46;com">test1<span>&#64;</span>forcs<span>&#46;</span>com</a></p></li>
<li><p>受信者携帯電話番号: 010-2222-3333</p></li>
<li><p>依頼の有効期間: 7日 7時間</p></li>
<li><p>本人確認情報: 使用 (入力フィールドの中から選択 - テキスト1)</p></li>
<li><p>追加認証手段: 使用 (メール/SMS認証を使用、完了文書の閲覧時にはメール/SMS認証を不使用、携帯電話本人確認使用、完了文書の閲覧時にも携帯電話本人確認使用)</p></li>
</ul>
</div></blockquote>
<p>埋め込み実行時には以下のように実行されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>文書参加者: 2名 (送信者、参加者1)</p></li>
<li><p>「デザインする」ステップでデフォルトで表示する文書参加者: 参加者1</p></li>
<li><p>ワークフロー: 送信者-参加者 1-完了</p></li>
</ul>
</div></blockquote>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;selected&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipient&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test1@forcs.com&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;鈴木三郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;+821022223333&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;field&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;テキスト1&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;password_hint&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;生年月日を6桁で入力してください。&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;7&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;7&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="s2">&quot;additional_auth&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;use_pincode&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;use_pincode_result&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">                        </span><span class="s2">&quot;use_mobile_verifyAuth&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;use_mobile_verifyAuth_result&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>「デザインする」ステップでコンポーネントID入力欄の有効化/無効化を設定</strong></p>
<p>trueに設定することで、「デザインする」ステップでコンポーネントIDの入力欄が無効化されます。 (基本IDで固定されます)</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;disabled_form_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;購入申請書&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;selected&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipient&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test1@forcs.com&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;鈴木三郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;+819022223333&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;field&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;テキスト1&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;password_hint&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;生年月日を6桁で入力してください。&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;7&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;7&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="s2">&quot;additional_auth&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;use_pincode&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;use_pincode_result&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">                        </span><span class="s2">&quot;use_mobile_verifyAuth&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;use_mobile_verifyAuth_result&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;06&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;検討者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;selected&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipient&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test2@forcs.com&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;鈴木四郎&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nx">disabled_form_id</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="template-file">
<h5>6. template_file(テンプレートファイル/任意)<a class="headerlink" href="#template-file" title="Link to this heading"></a></h5>
<p>テンプレートに使用されるファイルが自動的にアップロードされるように設定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>ファイル名</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mime</p></td>
<td><p>MIMEデータ形式</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><ul class="simple">
<li><p>PDF: &quot;application/pdf&quot;</p></li>
<li><p>対応するすべての拡張子(OZR, PDF): &quot;&#64;file/octet-stream&quot;</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>Base64に変換したファイルデータ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;template_file&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;添付テスト.pdf&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;mime&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;@file/octet-stream&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;JVBERi0xLjUNCiW1tbW1DQoxIDAgb2JqDQo8PC9UeXBlL0NhdGFsb2cvUGFnZXMgMiAwIFIvTGFuZyhrby1LUikgL1N0cnVjdFRyZWVSb290IDE1IDAgUi9NY...(以下省略)&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id18">
<h3>テンプレートの生成、テンプレートの修正、テンプレートの複製<a class="headerlink" href="#id18" title="Link to this heading"></a></h3>
<p>eformsignを埋め込んでテンプレートを作成、修正、複製する場合の操作です。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignTemplate</span><span class="p">();</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;company&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;76440d70fae242e09c4b0fac40b6a6be&quot;</span><span class="p">,</span><span class="w">            </span><span class="c1">// Company IDを入力</span>
<span class="w">      </span><span class="s2">&quot;country_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// 国コードを入力 (ex: ja)</span>
<span class="w">      </span><span class="s2">&quot;user_key&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">        </span><span class="c1">// 埋め込んだ顧客システムにログインしたユーザーのunique key。ブラウザクッキーのeformsignのログイン情報と比較</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="s2">&quot;user&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test1@forcs.com&quot;</span>
<span class="w">        </span><span class="s2">&quot;access_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// Access Tokenを入力 (OpenAPI Access Tokenを参照)</span>
<span class="w">        </span><span class="s2">&quot;refresh_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// Refresh Tokenを入力 (OpenAPI Access Tokenを参照)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// 01 : 生成 , 02 : 修正, 03 : 複製</span>
<span class="w">        </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// template idを入力</span>
<span class="w">        </span><span class="s2">&quot;template_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;form&quot;</span><span class="w"> </span><span class="c1">// form : テンプレート管理、 unstructured_form: マイファイルで文書作成</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;layout&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;lang_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// eformsignの言語. ja, en, ko</span>
<span class="w">        </span><span class="s2">&quot;header&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">    </span><span class="c1">// ヘッダ(青色部分)の表示有無。非表示の場合、アクションボタンで送信などの動作を指定。</span>
<span class="w">        </span><span class="s2">&quot;footer&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w">     </span><span class="c1">// フッタ(eformsignのロゴ、言語設定など)の表示有無。</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;テンプレートの埋め込みテスト_新規&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 05: 参加者, 06: 検討者</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者2&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipients&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test2@forcs.com&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;John Doe&#39;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5a3e47a2f5a04909836ddf4189d10fc4&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;グループ3&#39;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;7&#39;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;7&#39;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;quick_processing&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;template_file&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;添付テスト.pdf&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;mime&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;@file/octet-stream&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;JVBERi0xLjUNCiW1tbW1DQoxIDAgb2JqDQo8PC9UeXBlL0NhdGFsb2cvUGFnZXMgMiAwIFIvTGFuZyhrby1LUikgL1N0cnVjdFRyZWVSb290IDE1IDAgUi...&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">//callback option</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">sucess_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="s1">&#39;template&#39;</span><span class="p">){</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">template_id</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">template_name</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">step_settings</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートが生成されました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- document_id : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">template_id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- title : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">template_name</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートの生成に失敗しました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- code : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- message : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="p">};</span>


<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートの生成に失敗しました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- code : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- message : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">action_callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">template_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">action_callback</span><span class="p">);</span>
</pre></div>
</div>
<section id="id19">
<h4>template_option<a class="headerlink" href="#id19" title="Link to this heading"></a></h4>
<p>オプション設定のためのJSONの構造は以下の通りです。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>下位オプション</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>company</p></td>
<td><p>会社情報</p></td>
<td><p>Object</p></td>
<td><p>O</p></td>
<td><p>id, country_code, user_key</p></td>
</tr>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>埋め込みモード</p></td>
<td><p>Object</p></td>
<td><p>O</p></td>
<td><p>type, template_id, document_id</p></td>
</tr>
<tr class="row-even"><td><p>user</p></td>
<td><p>ユーザー情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>type, id, access_token, refresh_token, internal_token, external_token, external_user_info</p></td>
</tr>
<tr class="row-odd"><td><p>layout</p></td>
<td><p>レイアウト</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>lang_code, header, footer</p></td>
</tr>
<tr class="row-even"><td><p>prefill</p></td>
<td><p>自動記入</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>document_name, fields, recipients, comment</p></td>
</tr>
<tr class="row-odd"><td><p>template_file</p></td>
<td><p>テンプレートファイル</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>name, mime, data</p></td>
</tr>
</tbody>
</table>
</section>
<section id="callback">
<h4>Callbackパラメータ<a class="headerlink" href="#callback" title="Link to this heading"></a></h4>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>会社情報とモードは必須入力です。</p>
</div>
<section id="id20">
<h5>1. company(会社情報/必須)<a class="headerlink" href="#id20" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>会社ID</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>会社管理 - 会社情報から確認</p></td>
</tr>
<tr class="row-odd"><td><p>country_code</p></td>
<td><p>国コード</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>会社管理 - 会社情報の国コードを指定。任意入力ですが、入力するとopenが高速化します。</p></td>
</tr>
<tr class="row-even"><td><p>user_key</p></td>
<td><p>顧客システムユーザー固有キー</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>埋め込む顧客システム内で、ユーザーが誰であるかを明確に設定するために、eformsignに渡すユーザーアカウント情報です。</p>
<p>ブラウザに既にログイン情報がある場合、そのkeyと比較して一致しない場合、ログアウト処理されます。</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="s2">&quot;company&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;f9aec832efef4133a1e849efaf8a9aed&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s2">&quot;country_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="s2">&quot;user_key&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span>
<span class="w">     </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id21">
<h5>2. mode(組み込みモード/必須)<a class="headerlink" href="#id21" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>機能タイプ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>01: 生成, 02: 修正, 03: 複製</p></td>
</tr>
<tr class="row-odd"><td><p>template_id</p></td>
<td><p>テンプレートID</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>typeが02, 03の場合必須入力</p></td>
</tr>
<tr class="row-even"><td><p>template_type</p></td>
<td><p>組み込みタイプ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>&quot;form&quot;: テンプレート管理</p></td>
</tr>
</tbody>
</table>
<p><strong>テンプレートの新規生成</strong></p>
<p>テンプレートを新規生成します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// 01 : 生成 , 02 : 修正, 03 : 複製</span>
<span class="w">    </span><span class="s2">&quot;template_type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;form&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>テンプレートの修正</strong></p>
<p>作成済みのテンプレートを修正します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;02&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// 01 : 生成 , 02 : 修正, 03 : 複製</span>
<span class="w">    </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;a2c6ed9df9b642f2ade43c7efe58c9a3&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// template idを入力</span>
<span class="w">    </span><span class="s2">&quot;template_type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;form&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>テンプレートの複製</strong></p>
<p>作成済みのテンプレートを複製して、新規テンプレートを生成します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;03&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// 01 : 生成 , 02 : 修正, 03 : 複製</span>
<span class="w">    </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;a2c6ed9df9b642f2ade43c7efe58c9a3&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// template idを入力</span>
<span class="w">    </span><span class="s2">&quot;template_type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;form&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id22">
<h5>3. user(ユーザー情報/任意)<a class="headerlink" href="#id22" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>アカウント(メールアドレス)</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>ユーザーID/メールアドレスを入力</p></td>
</tr>
<tr class="row-odd"><td><p>access_token</p></td>
<td><p>Access Token</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>Open API &gt; <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Tokenを発行</a></p></td>
</tr>
<tr class="row-even"><td><p>refresh_token</p></td>
<td><p>Refresh Token</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>Open API &gt; <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Tokenを発行</a></p></td>
</tr>
</tbody>
</table>
<p><strong>テンプレート管理権限のあるメンバーログインによる作業(IDを事前入力)</strong></p>
<p>埋め込み時、eformsignのログインページが起動し、ログイン後にテンプレート管理作業を行うことができます。この際、IDがログイン画面にあらかじめ入力されます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>テンプレート管理権限を持つメンバーのトークンによる作業</strong></p>
<p>埋め込みの際、eformsignにログインすることなく、特定のアカウントのトークンを利用してテンプレート管理作業を行います。
トークンの発行方法はeformsign APIの使い方 - <a class="reference external" href="https://eformsignjp.github.io/developers/help/eformsign_api.html#id5">Access Tokenの発行</a>をご確認ください。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eformsign@forcs.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;access_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJlZ...&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;refresh_token&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;0161ac6c-0f47-4cc3-9301-381f57c41495&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id23">
<h5>4. layout(レイアウト/任意)<a class="headerlink" href="#id23" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 29.6%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 37.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lang_code</p></td>
<td><p>eformsignの言語</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>ja: 日本語, en: 英語, ko: 韓国語</p></td>
</tr>
<tr class="row-odd"><td><p>header</p></td>
<td><p>ヘッダの表示有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: true</p>
<p>ヘッダが非表示(false)の場合、「保存」などの機能のボタンも非表示になるため、別途機能ボタンの生成が必要です。</p>
<p>(<a class="reference external" href="#creating-button">画面ロード時のアクションボタン生成</a>)</p>
</td>
</tr>
<tr class="row-even"><td><p>footer</p></td>
<td><p>フッタ表示の有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: true</p></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;layout&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;lang_code&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ja&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;header&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;footer&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id24">
<h5>5. prefill(自動入力/任意)<a class="headerlink" href="#id24" title="Link to this heading"></a></h5>
<p>文書作成時に値を自動的に入力する際に使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>template_name</p></td>
<td><p>文書タイトル</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>step_settings</p></td>
<td><p>ワークフローステップのリスト</p></td>
<td><p>Array</p></td>
<td><p>X</p></td>
<td><p>ステップ情報Objectのリスト</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].step_type</p></td>
<td><p>ワークフローの受信者タイプ</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><ul class="simple">
<li><p>旧ワークフロー: &quot;02&quot;(決裁), &quot;03&quot;(内部受信者), &quot;04&quot;(外部受信者)</p></li>
<li><p>現行ワークフロー: &quot;05&quot;(参加者), &quot;06&quot;(検討者)</p></li>
</ul>
<p>step_settings内の各オブジェクトに設定必須</p>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].step_name</p></td>
<td><p>ワークフローステップの名前</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>step_settings[].selected</p></td>
<td><p>「デザインする」ステップで デフォルトの文書参加者の表示有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p>
<ul class="simple">
<li><p>すべての段階で入力なし/falseの場合、開始/送信者ステップがデフォルトで表示されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].use_mail</p></td>
<td><p>メール送信の有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].use_sms</p></td>
<td><p>SMS送信の有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].use_alimtalk</p></td>
<td><p>SMS送信時にカカオトークの使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p>
<p>trueに設定した場合、カカオトークで送信し、失敗時にSMSで送信</p>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient[]</p></td>
<td><p>受信者情報のリスト</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者指定時のみ</p>
<p>受信者情報Objectのリスト</p>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient[].id</p></td>
<td><p>受信者に指定するグループ/メンバーID</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者指定時のみ</p>
<ul class="simple">
<li><p>メンバー: 会社メンバーのアカウント情報(ID/メールアドレス)入力</p></li>
<li><p>グループ: グループIDの入力</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient[].auth</p></td>
<td><p>本人確認及び文書送信期限の情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者指定時のみ</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient[].auth.valid</p></td>
<td><p>文書の送信期限情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者指定時のみ</p>
<p>入力しない場合、デフォルト値に設定: 7日 0時間</p>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].recipient[].auth.valid.day</p></td>
<td><p>文書の送信期限 (日)</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者指定時のみ</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].recipient[].auth.valid.hour</p></td>
<td><p>文書の送信期限 (時間)</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者指定時のみ</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].auth</p></td>
<td><p>本人確認及び文書の送信期限情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない場合のみ</p>
<p>type、password、password_hintをすべて入力しない場合: 本人確認情報を使用しない</p>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].auth.type</p></td>
<td><p>本人確認の方法</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない場合のみ</p>
<p>入力しない場合、デフォルト値に設定: password (type、password、password_hintをすべて入力しない場合: 本人確認情報を使用しない)</p>
<ul class="simple">
<li><p>qna: 受信者名</p></li>
<li><p>field: 入力フィールドの中から選択</p></li>
<li><p>password: 送信者が入力</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].auth.password</p></td>
<td><p>本人確認情報</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない場合のみ</p>
<p>入力しない場合、デフォルト値に設定: 空欄</p>
<ul class="simple">
<li><p>typeがqnaの場合: 空欄</p></li>
<li><p>typeがfieldの場合: フィールド名を入力</p></li>
<li><p>typeがpasswordの場合: 空欄</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].auth.password_hint</p></td>
<td><p>本人確認情報についてのヒント</p></td>
<td><p>String</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない場合のみ</p>
<p>入力しない場合、デフォルト値に設定: 空欄</p>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].auth.valid</p></td>
<td><p>文書の送信期限情報</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない場合のみ</p>
<p>入力しない場合、デフォルト値に設定: 7日 0時間</p>
</td>
</tr>
<tr class="row-odd"><td><p>step_settings[].auth.valid.day</p></td>
<td><p>文書の送信期限 (日)</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない場合のみ</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].auth.valid.hour</p></td>
<td><p>文書の送信期限 (時間)</p></td>
<td><p>Integer</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の 지정をしない 경우のみ</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].additional_auth</p></td>
<td><p>追加認証手段 (非定型)</p></td>
<td><p>Object</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない場合のみ</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].additional_auth.use_pincode</p></td>
<td><p>メール/SMS認証の使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない 경우のみ (旧 use_mail)</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].additional_auth.use_pincode_result</p></td>
<td><p>完了文書の閲覧時にも メール/SMS認証の使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない 경우のみ</p></td>
</tr>
<tr class="row-even"><td><p>step_settings[].additional_auth.use_mobile_verifyAuth</p></td>
<td><p>携帯電話番号本人確認の使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない 경우のみ (旧 use_sms)</p></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].additional_auth.use_mobile_verifyAuth_result</p></td>
<td><p>完了文書の閲覧時にも 携帯電話本人確認の使用有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>当該ステップの受信者の指定をしない 경우のみ (旧 use_sms_result)</p></td>
</tr>
<tr class="row-even"><td><p>is_form_id_numbering</p></td>
<td><p>コンポーネント追加時の基本IDから 番号付与の有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>テキストコンポーネントの追加時、コンポーネントIDのデフォルト値</p>
<ul class="simple">
<li><p>is_form_id_numberingがtrueの場合: 'テキスト1'、'テキスト2'、'テキスト3'</p></li>
<li><p>is_form_id_numberingがfalseの場合: 'テキスト'、'テキスト'、'テキスト'</p></li>
</ul>
<p>入力しない場合、デフォルト値に設定: true</p>
</td>
</tr>
<tr class="row-odd"><td><p>quick_processing</p></td>
<td><p>文書送信時のポップアップ省略有無</p></td>
<td><p>Boolean</p></td>
<td><p>X</p></td>
<td><p>入力しない場合、デフォルト値に設定: false</p></td>
</tr>
</tbody>
</table>
<p><strong>テンプレート名の記入</strong></p>
<p><strong>一般設定 &gt; 基本設定 &gt; テンプレート名</strong> に「購入申請書」と入力されます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;prefill&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;購入申請書&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>ワークフローステップの設定 (受信者を指定しない場合)</strong></p>
<p>以下のようにワークフローのステップを追加します。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステップの種類: 参加者</p></li>
<li><p>ステップ名: 参加者1</p></li>
<li><p>メール通知: 使用</p></li>
<li><p>SMS通知: 使用</p></li>
<li><p>受信者の指定: X</p></li>
<li><p>依頼の有効期間: 7日 0時間</p></li>
</ul>
</div></blockquote>
<p>埋め込んで実行すると、以下のように設定されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>文書参加者： 2名 (開始、参加者1)</p></li>
<li><p>ワークフロー: 開始-参加者 1-終了</p></li>
</ul>
</div></blockquote>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>ワークフローステップの設定(受信者としてメンバーを指定)</strong></p>
<p>以下のようにワークフローのステップを追加します。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステップの種類: 参加者</p></li>
<li><p>ステップ名: 参加者1</p></li>
<li><p>メール通知: 使用</p></li>
<li><p>SMS通知: 使用</p></li>
<li><p>受信者の指定: <a class="reference external" href="mailto:test2&#37;&#52;&#48;forcs&#46;com">test2<span>&#64;</span>forcs<span>&#46;</span>com</a> メンバー指定</p></li>
<li><p>依頼の有効期間: 7日 0時間</p></li>
</ul>
</div></blockquote>
<p>埋め込んで実行すると、以下のように設定されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>文書の参加者: 2名 (開始、参加者1)</p></li>
<li><p>ワークフロー: 開始-参加者 1-完了</p></li>
</ul>
</div></blockquote>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipients&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test2@forcs.com&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>ワークフローのステップ設定 (受信者にグループを指定)</strong></p>
<p>以下のようにワークフローのステップを追加します。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステップの種類: 参加者</p></li>
<li><p>ステップ名: 参加者1</p></li>
<li><p>メール通知: 使用</p></li>
<li><p>SMS通知: 使用</p></li>
<li><p>受信者の指定: <em>5a3e47a2f5a04909836ddf4189d10fc4</em> グループを指定</p></li>
<li><p>依頼の有効期間: 7日 0時間</p></li>
</ul>
</div></blockquote>
<p>埋め込んで実行すると、以下のように設定されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>文書の参加者: 2名 (開始、参加者1)</p></li>
<li><p>ワークフロー: 開始-参加者 1-完了</p></li>
</ul>
</div></blockquote>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipients&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5a3e47a2f5a04909836ddf4189d10fc4&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>ワークフローステップの設定 (受信者としてメンバーとグループを指定)</strong></p>
<p>以下のようにワークフローのステップを追加します。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステップの種類: 参加者</p></li>
<li><p>ステップ名: 参加者1</p></li>
<li><p>メール通知: 使用</p></li>
<li><p>SMS通知: 使用</p></li>
<li><p>受信者の指定: <em>test2&#64;forcs.com</em> メンバー, <em>5a3e47a2f5a04909836ddf4189d10fc4</em> グループの指定</p></li>
<li><p>以来の有効期間: 7日 0時間</p></li>
</ul>
</div></blockquote>
<p>埋め込んで実行すると、以下のように設定されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>文書の参加者: 2名 (開始、参加者1)</p></li>
<li><p>ワークフロー: 開始-参加者 1-完了</p></li>
</ul>
</div></blockquote>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;購入申請書&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipients&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test2@forcs.com&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5a3e47a2f5a04909836ddf4189d10fc4&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>文書送信時のポップアップの省略有無の設定</strong></p>
<p><strong>全般 &gt; 文書の設定 &gt; 文書送信</strong> 時にポップアップ省略にチェックが入ります。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;quick_processing&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">template_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;prefill&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;購入申請書&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipients&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test2@forcs.com&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;06&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;検討者1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;use_alimtalk&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;recipients&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5a3e47a2f5a04909836ddf4189d10fc4&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nx">quick_processing</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id25">
<h5>6. template_file(テンプレートファイル/任意)<a class="headerlink" href="#id25" title="Link to this heading"></a></h5>
<p>テンプレートに使用されるファイルが自動的にアップロードされるように設定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14.1%" />
<col style="width: 26.1%" />
<col style="width: 14.1%" />
<col style="width: 10.6%" />
<col style="width: 35.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>ファイル名</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mime</p></td>
<td><p>MIMEデータ形式</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><ul class="simple">
<li><p>PDF: &quot;application/pdf&quot;</p></li>
<li><p>対応するすべての拡張子(OZR, PDF): &quot;&#64;file/octet-stream&quot;</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>Base64に変換したファイルデータ</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;tempalte_file&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;添付テスト.pdf&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;mime&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;@file/octet-stream&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;JVBERi0xLjUNCiW1tbW1DQoxIDAgb2JqDQo8PC9UeXBlL0NhdGFsb2cvUGFnZXMgMiAwIFIvTGFuZyhrby1LUikgL1N0cnVjdFRyZWVSb290IDE1IDAgUi9NY...(후략)&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="id26">
<h2>応答確認とコールバックの設定(オプション)<a class="headerlink" href="#id26" title="Link to this heading"></a></h2>
<p>eformsignの機能を埋め込んで使用する場合、特定の状況でeformsignから情報を含む応答を受け取ることができます。
また、その応答を利用して特定の動作を実行するようにコールバックを設定することができます。</p>
<p><strong>応答とコールバックの種類</strong></p>
<p><strong>- 作業成功時(Success Callback)</strong></p>
<p>埋め込みで実行する操作が成功した場合、実行結果の情報を含む応答を受信し、コールバックを使用することができます。
文書プレビューのように追加で実行できる作業がない機能を埋め込んだ場合は、使用することができません。</p>
<p><strong>- 作業失敗時(Error Callback)</strong></p>
<p>埋め込みで実行する作業が失敗した場合、実行結果の情報を含む応答を受信し、コールバックを使用することができます。
文書のプレビューなど、追加で実行できる作業がない場合は使用できません。</p>
<p><strong>- 画面ロード時(Action Callback)</strong></p>
<p>埋め込んだ画面がロードされると、その画面で実行できるアクションのリスト情報を含む応答を受信し、コールバックを使用することができます。
受信した応答のアクションリストに基づいて、ヘッダのアクションボタンに置き換わるボタンを設定することができます。</p>
<section id="success-fail">
<span id="id27"></span><h3>作業の成功/失敗時<a class="headerlink" href="#success-fail" title="Link to this heading"></a></h3>
<p>eformsignを埋め込んで実行した作業が成功/失敗した時に返される応答と、応答の受信後に特定の機能を実行できるコールバック関数Success Callback / Error Callbackについて説明します。</p>
<section id="response">
<h4>応答(Response)<a class="headerlink" href="#response" title="Link to this heading"></a></h4>
<p>文書の作成/処理、テンプレートの作成/修正/複製などの作業に成功/失敗した場合、次のようなresponseが返されます。</p>
<section id="eformsigndocument">
<h5>EformSignDocument(テンプレートで文書作成、文書処理)<a class="headerlink" href="#eformsigndocument" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>String</p></td>
<td><p>組み込んで作成した作業の種類</p></td>
<td></td>
<td><ul class="simple">
<li><p>&quot;document&quot;</p></li>
<li><p>その他の機能については今後提供予定</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>fn</p></td>
<td><p>String</p></td>
<td><p>実行した機能</p></td>
<td></td>
<td><ul class="simple">
<li><p>&quot;saveSuccess&quot; : 保存成功</p></li>
<li><p>その他 : エラー</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>code</p></td>
<td><p>String</p></td>
<td><p>文書の作成・処理の際、結果コードを返却</p></td>
<td></td>
<td><ul class="simple">
<li><p>&quot;-1&quot; : 文書の作成/処理成功</p></li>
<li><p>&quot;0&quot; : ログアウト成功</p></li>
<li><p>その他 : エラー</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>message</p></td>
<td><p>String</p></td>
<td><p>文書の作成・処理の際、成功・エラーメッセージを返却</p></td>
<td></td>
<td><ul class="simple">
<li><p>&quot;成功しました。&quot; : 文書作成/処理成功</p></li>
<li><p>その他 : エラー</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>document_id</p></td>
<td><p>String</p></td>
<td><p>文書提出の成功時、作成した文書のdocument_idを返却</p></td>
<td></td>
<td><p>例) &quot;910b8a965f9402b82152f48c6da5a5c&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>title</p></td>
<td><p>String</p></td>
<td><p>文書提出の成功時、作成した文書タイトルを返却</p></td>
<td></td>
<td><p>例) &quot;契約書&quot;</p></td>
</tr>
<tr class="row-even"><td><p>values</p></td>
<td><p>Object</p></td>
<td><p>document_optionに定義されたreturn_fieldsに入力したフィールド名に対してユーザーが入力した値を返却</p></td>
<td></td>
<td><p>{&quot;フィールド名&quot;: &quot;フィールド値&quot;} 型のObjectで返却</p>
<p>例) {&quot;名前&quot;: &quot;田中太郎&quot;}</p>
</td>
</tr>
<tr class="row-odd"><td><p>recipients</p></td>
<td><p>Array</p></td>
<td><p>次の受信者の情報Objectリストを返却</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>recipients[].step_idx</p></td>
<td><p>String</p></td>
<td><p>ワークフローの順序</p></td>
<td></td>
<td><p>1番目の受信者: &quot;2&quot;、2人目以降の受信者: 3, 4...と順番に沿って1ずつ増加</p></td>
</tr>
<tr class="row-odd"><td><p>recipients[].step_type</p></td>
<td><p>String</p></td>
<td><p>受信者の種類</p></td>
<td></td>
<td><p>旧ワークフロー: &quot;01&quot;(完了)、&quot;02&quot;(決裁)、&quot;03&quot;(外部受信者)、&quot;04&quot;(内部受信者)</p>
<p>現行ワークフロー: &quot;01&quot;(完了)、&quot;05&quot;(参加者)、&quot;06&quot;(検討者)</p>
</td>
</tr>
<tr class="row-even"><td><p>recipients[].recipient_type</p></td>
<td><p>String</p></td>
<td><p>受信者の種類</p></td>
<td></td>
<td><p>&quot;01&quot; : 会社のメンバー</p>
<p>&quot;02&quot; : 外部受信者</p>
</td>
</tr>
<tr class="row-odd"><td><p>recipients[].use_mail</p></td>
<td><p>Boolean</p></td>
<td><p>メール送信</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>recipients[].use_sms</p></td>
<td><p>Boolean</p></td>
<td><p>SMS送信</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].id</p></td>
<td><p>String</p></td>
<td><p>アカウント（メールアドレス）</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>recipients[].name</p></td>
<td><p>String</p></td>
<td><p>受信者の名前</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].sms</p></td>
<td><p>String</p></td>
<td><p>携帯電話番号</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>recipients[].auth</p></td>
<td><p>Object</p></td>
<td><p>本人確認及び文書の送信期限情報</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].auth.password</p></td>
<td><p>String</p></td>
<td><p>本人確認情報（パスワード）</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>recipients[].auth.password_hint</p></td>
<td><p>String</p></td>
<td><p>本人確認情報のヘルプ（パスワードのヒント）</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].auth.valid</p></td>
<td><p>Object</p></td>
<td><p>文書の送信期限情報</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>recipients[].auth.valid.day</p></td>
<td><p>Integer</p></td>
<td><p>文書の送信期限（日）</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>recipients[].auth.valid.hour</p></td>
<td><p>Integer</p></td>
<td><p>文書の送信期限（時間）</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;document&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;fn&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;saveSuccess&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;code&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;-1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;成功しました。&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;document_id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;c59c522ea9294660bfa84263c95c4e54&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;個人情報取扱同意書&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;values&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;名前&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;田中太郎&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">&quot;recipients&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;step_idx&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;06&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;recipient_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;02&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;use_mail&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;use_sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test@forcs.com&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;sms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;+821023456789&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;auth&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;password_hint&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;valid&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;day&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;hour&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="eformsigntemplate">
<h5>EformSignTemplate (マイファイルで文書作成、テンプレート生成、テンプレート修正、テンプレート複製)<a class="headerlink" href="#eformsigntemplate" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 13.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>String</p></td>
<td><p>組み込んで作成した作業の種類</p></td>
<td><ul class="simple">
<li><p>&quot;template&quot;</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>fn</p></td>
<td><p>String</p></td>
<td><p>実行した機能</p></td>
<td><ul class="simple">
<li><p>&quot;saveSuccess&quot; : 保存成功</p></li>
<li><p>それ以外 : エラー</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>code</p></td>
<td><p>String</p></td>
<td><p>文書の作成・処理の際、結果コードを返却</p></td>
<td><ul class="simple">
<li><p>&quot;-1&quot; : テンプレート作業に成功</p></li>
<li><p>&quot;0&quot; : ログアウト成功</p></li>
<li><p>それ以外 : エラー</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>message</p></td>
<td><p>String</p></td>
<td><p>テンプレート作業時、成功/エラーメッセージを返却</p></td>
<td><ul class="simple">
<li><p>&quot;成功しました。&quot; : 文書作成/処理成功</p></li>
<li><p>それ以外 : エラー</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>template_id</p></td>
<td><p>String</p></td>
<td><p>テンプレート作業の成功時、作業したテンプレートのIDを返却</p></td>
<td><p>例) &quot;910b8a965f9402b82152f48c6da5a5c&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>template_name</p></td>
<td><p>String</p></td>
<td><p>テンプレート作業の成功時、作業したテンプレート名を返却</p></td>
<td><p>例) &quot;契約書&quot;</p></td>
</tr>
<tr class="row-even"><td><p>step_settings</p></td>
<td><p>Array</p></td>
<td><p>ワークフローステップのリスト</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>step_settings[].step_type</p></td>
<td><p>String</p></td>
<td><p>ワークフローステップの種類</p></td>
<td><ul class="simple">
<li><p>共通: &quot;00&quot;(開始)、 &quot;01&quot;(完了)</p></li>
<li><p>旧ワークフロー: &quot;02&quot;(検討)、 &quot;03&quot;(外部受信者)、 &quot;04&quot;(内部受信者)</p></li>
<li><p>現行ワークフロー: &quot;05&quot;(参加者)、 &quot;06&quot;(検討者)</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>step_settings[].step_name</p></td>
<td><p>String</p></td>
<td><p>ワークフローステップ名</p></td>
<td><p>例) &quot;参加者1&quot;</p></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;template&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;fn&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;saveSuccess&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;code&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;-1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;成功しました。&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;template_id&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;9a368e9409bc4351865637e85882cf01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;template_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;テンプレート埋め込みテスト_新規&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;step_settings&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;00&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;開始&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者2&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;06&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;検討者1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;05&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;参加者3&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;step_type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;step_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;完了&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id28">
<h4>2. コールバック(Callback)<a class="headerlink" href="#id28" title="Link to this heading"></a></h4>
<p>Success CallbackとError Callbackは、各タスクの成功時、失敗時に実行される関数です。
タスクの成功/失敗時に返されるresponseを受け取り、目的のタスクを実行するように設定することができます。</p>
<p>例えば、必要に応じて必要な値をコンソールに出力(console.log)、警告ウィンドウを表示(alert)、条件文などを利用して、状況応じて必要な機能を実行させることができます。</p>
<section id="id29">
<h5>EformSignDocument 実行例<a class="headerlink" href="#id29" title="Link to this heading"></a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignDocument</span><span class="p">();</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* 省略 */</span><span class="w"> </span><span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">success_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">document_id</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="s2">&quot;名前&quot;</span><span class="p">]);</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="nx">document_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">);</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="id30">
<h5>EformSignTemplate 実行例<a class="headerlink" href="#id30" title="Link to this heading"></a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignTemplate</span><span class="p">();</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* 省略 */</span><span class="w"> </span><span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">success_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="s1">&#39;template&#39;</span><span class="p">){</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">template_id</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">template_name</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">step_settings</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートを生成しました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- document_id : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">template_id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- title : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">template_name</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;テンプレートの生成に失敗しました。\n&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;- code : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n- message : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="nx">document_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="loading">
<span id="id31"></span><h3>画面のロード時<a class="headerlink" href="#loading" title="Link to this heading"></a></h3>
<p>eformsignを埋め込んだ画面がロードされた際の応答と、応答の受信時に特定の機能を実行することができるコールバック関数Action Callbackについて説明します。
また、ヘッダにあるアクションボタンを代替するボタンの生成方法についても説明します。</p>
<section id="id32">
<h4>応答(Response)<a class="headerlink" href="#id32" title="Link to this heading"></a></h4>
<p>埋め込んだeformsign機能の画面がロードされると、responseによってその画面で実行できる機能に関する情報が返却されます。
Responseの構造と例は以下の通りです。</p>
<section id="id33">
<h5>EformSignDocument (テンプレート文書作成、文書処理)<a class="headerlink" href="#id33" title="Link to this heading"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 17.2%" />
<col style="width: 13.8%" />
<col style="width: 34.5%" />
<col style="width: 34.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数名</p></th>
<th class="head"><p>データタイプ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>String</p></td>
<td><p>埋め込んで作成した作業の種類</p></td>
<td><ul class="simple">
<li><p>EformSignDocument使用作業: &quot;document&quot;</p></li>
<li><p>EformSignTemplate使用作業: &quot;template&quot;</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>fn</p></td>
<td><p>String</p></td>
<td><p>実行した機能</p></td>
<td><ul class="simple">
<li><p>&quot;actionCallback&quot;</p></li>
<li><p>それ以外 : エラー</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>Array</p></td>
<td><p>画面内で実行できる機能の一覧</p></td>
<td><ul class="simple">
<li><p>{&quot;name&quot;:&quot;名前&quot;, &quot;code&quot;:&quot;00&quot;} 形式のObjectのリスト</p></li>
<li><p>{&quot;name&quot;: &quot;func_get_return_fields&quot;, code: &quot;99&quot;}は戻り値フィールドを処理するための機能で、常に表示されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>data[].name</p></td>
<td><p>String</p></td>
<td><p>機能の名称</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>data[].code</p></td>
<td><p>String</p></td>
<td><p>機能のコード</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;document&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;fn&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;actionCallback&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;送信&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;code&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;21&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;func_get_return_fields&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;code&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;99&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id34">
<h4>コールバック (Callback)<a class="headerlink" href="#id34" title="Link to this heading"></a></h4>
<p>Action Callbackは機能画面のロード時に、responseを受信後に実行される関数です。
Responseと無関係の別作業を自動的に実行するように設定したり、文書画面の読み込み時に返されるresponseを受け取り、それに応じて必要な作業を実行するように設定することができます。</p>
<section id="id35">
<h5>コード例<a class="headerlink" href="#id35" title="Link to this heading"></a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignDocument</span><span class="p">();</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* 省略 */</span><span class="w"> </span><span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">success_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 省略</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 省略</span>
<span class="p">};</span>


<span class="kd">var</span><span class="w"> </span><span class="nx">action_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;赤色で強調表示されている入力欄に値を入力してください。&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span><span class="w">   </span><span class="c1">// 機能リストの出力</span>
<span class="p">}</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="nx">document_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">action_callback</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-button">
<span id="id36"></span><h4>アクションボタンの生成<a class="headerlink" href="#creating-button" title="Link to this heading"></a></h4>
<p>機能オプションの設定時、ヘッダを非表示にするオプションがあります。
しかし、ヘッダを非表示にすると、ヘッダに存在するアクションボタン(送信、リクエストなど)が同時に非表示となるため、別途アクションボタンを生成する必要があります。</p>
<p>EformsignDocumentオブジェクトとEformsignTemplateオブジェクトの両方に存在するsendAction関数を使うと、特定のアクションを実行することができます。
任意の形式でボタンを生成し、クリックするとsendAction関数が実行されるように設定してください。</p>
<hr class="docutils" />
<ul class="simple">
<li><p>EformSignDocument.sendAction(action)</p></li>
<li><p>EformSignTemplate.sendAction(action)</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ名</p></th>
<th class="head"><p>パラメータの種類</p></th>
<th class="head"><p>必須</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>action</p></td>
<td><p>JSON</p></td>
<td><p>O</p></td>
<td><p>アクション情報</p></td>
</tr>
<tr class="row-odd"><td><p>action.type</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>区分 (01: 文書、 02: テンプレート)</p></td>
</tr>
<tr class="row-even"><td><p>action.code</p></td>
<td><p>String</p></td>
<td><p>O</p></td>
<td><p>アクションコード</p></td>
</tr>
</tbody>
</table>
<p>sendAction関数で使えるアクションコードのリストは以下の通りです。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24.0%" />
<col style="width: 16.0%" />
<col style="width: 12.0%" />
<col style="width: 8.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>action.type</p></th>
<th class="head"><p>action.code</p></th>
<th class="head"><p>ボタン名</p></th>
<th class="head"><p>ボタンテキスト</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>01</p></td>
<td><p>00</p></td>
<td><p>btn_close</p></td>
<td></td>
<td><p>閉じる</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>01</p></td>
<td><p>btn_save_as_draft</p></td>
<td><p>下書き保存</p></td>
<td><p>文書作成中に下書き保存</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>02</p></td>
<td><p>btn_process_request</p></td>
<td><p>依頼</p></td>
<td><p>内部受信者/内部受信者を含む複数の受信者に文書作成を依頼(旧ワークフローを使用した文書作成時)</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>03</p></td>
<td><p>btn_outsider</p></td>
<td><p>依頼</p></td>
<td><p>外部受信者に文書作成を依頼（旧ワークフローを使用した文書作成時）</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>04</p></td>
<td><p>btn_approval</p></td>
<td><p>依頼</p></td>
<td><p>決裁者に文書作成を依頼（旧ワークフローを使用した文書作成時）</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>05</p></td>
<td><p>btn_write_complete</p></td>
<td><p>完了</p></td>
<td><p>文書作成の完了 (ワークフロー上、次の受信者がいない場合)</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>06</p></td>
<td><p>btn_acceptStepReject</p></td>
<td><p>承認</p></td>
<td><p>差戻し依頼の承認</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>07</p></td>
<td><p>btn_stepReject</p></td>
<td><p>差戻し</p></td>
<td><p>文書の差戻し（内部受信者）</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>08</p></td>
<td><p>btn_cancelStepReject</p></td>
<td><p>差戻し</p></td>
<td><p>差戻し依頼の差戻し</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>09</p></td>
<td><p>btn_active</p></td>
<td><p>承認</p></td>
<td><p>文書の承認(旧ワークフローを使用した文書決裁時)</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>10</p></td>
<td><p>btn_approvalReject</p></td>
<td><p>差戻し</p></td>
<td><p>文書の差戻し (決済者)</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>11</p></td>
<td><p>btn_delete_approval</p></td>
<td><p>承認</p></td>
<td><p>文書の削除の承認</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>12</p></td>
<td><p>btn_delete_refuse</p></td>
<td><p>差戻し</p></td>
<td><p>文書の削除の差戻し</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>13</p></td>
<td><p>btn_revoke_approval</p></td>
<td><p>承認</p></td>
<td><p>文書の無効化の承認</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>14</p></td>
<td><p>btn_revoke_refuse</p></td>
<td><p>差戻し</p></td>
<td><p>文書の無効化の差戻し</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>15</p></td>
<td><p>btn_change_title</p></td>
<td><p>タイトル変更</p></td>
<td><p>文書タイトルの変更</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>16</p></td>
<td><p>btn_show_history</p></td>
<td><p>履歴確認</p></td>
<td><p>文書プレビューの埋め込み時、もっと見る( ⋮ ) → 履歴を見るボタン</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>18</p></td>
<td><p>btn_send_pdf</p></td>
<td><p>完了文書の送信</p></td>
<td><p>もっと見る( ⋮ ) → 完了文書送信ボタン</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>19</p></td>
<td><p>btn_draft</p></td>
<td><p>下書き保存</p></td>
<td><p>文書処理中の一時保存</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>20</p></td>
<td><p>btn_unstructured_write_complete</p></td>
<td><p>送信</p></td>
<td><p>文書作成完了 (マイファイルで文書作成時、受信者がいない場合)</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>21</p></td>
<td><p>btn_unstructured_process_request</p></td>
<td><p>送信</p></td>
<td><p>文書の送信 (現行ワークフローを使用して文書作成時、次の受信者がいる場合)</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>22</p></td>
<td><p>btn_unstructured_active</p></td>
<td><p>送信</p></td>
<td><p>文書の送信（現行ワークフローを使用した文書処理時）</p></td>
</tr>
<tr class="row-even"><td><p>01</p></td>
<td><p>99</p></td>
<td><p>func_get_return_fields</p></td>
<td></td>
<td><p>リターンフィールドの取得(文書の送信/完了/依頼時に自動実行)</p></td>
</tr>
<tr class="row-odd"><td><p>02</p></td>
<td><p>00</p></td>
<td></td>
<td><p>閉じる</p></td>
<td><p>文書作成画面から出てフォーム設定に戻る(マイファイルで文書作成時)</p></td>
</tr>
<tr class="row-even"><td><p>02</p></td>
<td><p>01</p></td>
<td><p>anotherTemplateBtn</p></td>
<td><p>完了</p></td>
<td><p>テンプレート一覧に戻る (テンプレート管理)</p></td>
</tr>
<tr class="row-odd"><td><p>02</p></td>
<td><p>02</p></td>
<td><p>saveFormBtn</p></td>
<td><p>保存</p></td>
<td><p>テンプレートを保存（テンプレート管理</p></td>
</tr>
<tr class="row-even"><td><p>02</p></td>
<td><p>03</p></td>
<td><p>designTab</p></td>
<td><p>デザインする</p></td>
<td><p>[デザインする]タブ</p></td>
</tr>
<tr class="row-odd"><td><p>02</p></td>
<td><p>04</p></td>
<td><p>setupTab</p></td>
<td><p>設定/オプション</p></td>
<td><p>[設定]タブ(テンプレート管理) / [オプション]タブ(マイファイルで文書作成)</p></td>
</tr>
<tr class="row-even"><td><p>02</p></td>
<td><p>05</p></td>
<td><p>receipientTab</p></td>
<td><p>受信者の指定</p></td>
<td><p>[受信者を指定する]タブ(マイファイルで文書作成)</p></td>
</tr>
<tr class="row-odd"><td><p>02</p></td>
<td><p>06</p></td>
<td><p>writeDocumentBtn</p></td>
<td><p>文書の作成を始める</p></td>
<td><p>[文書の作成を始める]ボタン(マイファイルで文書作成)</p></td>
</tr>
<tr class="row-even"><td><p>02</p></td>
<td><p>99</p></td>
<td><p>func_get_return_fields</p></td>
<td></td>
<td><p>リターンフィールドのインポート (文書送信/完了/依頼時に自動実行)</p></td>
</tr>
</tbody>
</table>
<p>例）クリックすると（現行ワークフローを使用し、次の受信者がいる文書を作成後）送信するボタンは次のように作成することができます。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_21&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;eformsign.sendAction({type: &quot;</span><span class="mo">01</span><span class="s2">&quot;, code: &quot;</span><span class="mf">21</span><span class="s2">&quot;});&quot;</span><span class="o">&gt;</span><span class="nx">送信</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>上記のアクションコード一覧で確認できるように、ワークフローの構成や文書の状態などによって、使用するボタンの種類は異なります。
また、同じテキストのボタンであっても、状況によって異なるアクションコードを使用しなければならない場合が存在します。
したがって、特定の機能を実行するボタンを固定で配置しておくと、ボタンがその状況に合わずに誤動作が発生する可能性があります。
エラーの発生する可能性を減らすために、画面ロード時に受信する応答で、その画面で実行できるアクションのリストを確認後、そのリストに基づいてボタンを生成・表示する可変型方式の使用を推奨します。</p>
</div>
<p>以下は可変ボタンのコード例です。すべてのアクションコードに対して見えないボタンを生成しておき、その画面で実行できるアクションに該当するボタンだけを表示するように設定します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignDocument</span><span class="p">();</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* 省略 */</span><span class="w"> </span><span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">success_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 省略</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 省略</span>
<span class="p">};</span>


<span class="kd">var</span><span class="w"> </span><span class="nx">action_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#buttonList&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span><span class="s1">&#39;none&#39;</span><span class="p">);</span><span class="w">      </span><span class="c1">// div id=buttonListのすべてのボタンを非表示に設定</span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">idx</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">){</span><span class="w">                </span><span class="c1">// response.dataの各値について</span>
<span class="w">        </span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#buttonList&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">idx</span><span class="p">,</span><span class="w"> </span><span class="nx">btn</span><span class="p">){</span><span class="w">    </span><span class="c1">// div id=buttonListのすべてのボタンで</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">btn</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;btn_&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">code</span><span class="p">){</span><span class="w">  </span><span class="c1">// もしdata[].codeに該当するボタンがあれば</span>
<span class="w">                </span><span class="nx">$</span><span class="p">(</span><span class="nx">btn</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="nx">action</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="w">     </span><span class="c1">// ボタンのタイトルをdata[].nameに設定し</span>
<span class="w">                </span><span class="nx">$</span><span class="p">(</span><span class="nx">btn</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span><span class="w">                              </span><span class="c1">// ボタンが見えるよう設定</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">}</span>


<span class="kd">function</span><span class="w"> </span><span class="nx">actionTest</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// より簡単にsendAction関数にJSONを入力して実行するための関数の例であり、必ずしもこのような形で使う必要はありません。</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">type</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;01&#39;</span><span class="p">,</span><span class="w">    </span><span class="c1">// type : 01 : 文書 , 02 : テンプレート</span>
<span class="w">        </span><span class="nx">code</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">action</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">eformsign</span><span class="p">.</span><span class="nx">sendAction</span><span class="p">(</span><span class="nx">action</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">eformsign</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="nx">document_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">action_callback</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">すべてのアクションのボタンを生成しておき</span><span class="err">、</span><span class="nx">非表示に設定後</span><span class="err">、</span><span class="nx">action_callbackで必要なボタンだけを表示するように処理</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;buttonList&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;padding: 10px;&quot;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_01&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;01&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_02&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;02&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_03&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;03&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_04&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;04&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_05&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;05&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_06&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;06&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_07&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;07&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_08&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;08&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_09&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;09&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_10&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;10&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_11&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;11&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_12&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;12&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_13&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;13&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_14&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;14&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_15&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;15&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_16&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;16&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_17&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;17&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_18&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;18&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_19&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;19&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_20&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;20&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_21&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:80px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;21&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;btn_22&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:150px; height:30px; display: none;&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;actionTest(&#39;22&#39;);&quot;</span><span class="o">&gt;&lt;</span><span class="err">/button&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>


<span class="c">&lt;!--</span><span class="w"> </span><span class="nx">埋め込むiframeを生成</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">iframe</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="w"> </span><span class="nx">name</span><span class="o">=</span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width: 100%; height: 700px;&quot;</span><span class="o">&gt;&lt;</span><span class="err">/iframe&gt;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id37">
<h2>機能の埋め込みと実行<a class="headerlink" href="#id37" title="Link to this heading"></a></h2>
<p>先ほど生成したオプションとコールバックを使用してeformsignの機能を実際に埋め込み、実行するためのコードを作成します。</p>
<section id="id38">
<h3>eformsign機能の埋め込み領域の作成<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<p>まず、eformsign機能を埋め込んで表示するための領域を作成します。
eformsign機能を埋め込むための領域はiframe形式に対応しています。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">iframe</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="w"> </span><span class="nx">width</span><span class="o">=</span><span class="s2">&quot;1440&quot;</span><span class="w"> </span><span class="nx">height</span><span class="o">=</span><span class="s2">&quot;1024&quot;</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="err">/iframe&gt;</span>
</pre></div>
</div>
<p>例）上記のように横1440ピクセル、縦1024ピクセルのiframeを生成することができます。
領域生成時にidを設定する必要があります。上の例では、idを&quot;eformsign_iframe&quot;に設定しました。</p>
</section>
<section id="id39">
<h3>eformsign機能の埋め込み用コードの作成<a class="headerlink" href="#id39" title="Link to this heading"></a></h3>
<p>先ほど生成したiframe領域にeformsign機能を埋め込んで表示されるようにコードを作成します。
まず、埋め込む機能に合うオブジェクトを変数形式で生成します。下記の例では変数名を&quot;eformsign&quot;に設定しました。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignDocument</span><span class="p">();</span>
</pre></div>
</div>
<p>先ほど生成した埋め込みオプションとコールバック関数を変数形式で入力します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 中略</span>
<span class="w">    </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;a2c6ed9df9b642f2ade43c7efe58c9a3&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="c1">// 中略</span>
<span class="p">}</span>


<span class="kd">var</span><span class="w"> </span><span class="nx">success_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 省略</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 省略</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">action_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 省略</span>
<span class="p">};</span>
</pre></div>
</div>
<p>eformsign機能の実行のためのオプションを設定する関数を作成します。この際、先ほど生成したiframe領域と各種変数と関数を使います。
機能実行のための関数は、 <strong>EformsignDocumentオブジェクト</strong>の場合は <strong>document関数</strong>、 <strong>EformSignTemplateオブジェクト</strong>の場合は <strong>template関数</strong>を使用します。</p>
<hr class="docutils" />
<p>EformSignDocument.document(document_option, iframe_id, success_callback , error_callback, action_callback)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ名</p></th>
<th class="head"><p>パラメータの種類</p></th>
<th class="head"><p>必須/任意</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>document_option</p></td>
<td><p>JSON</p></td>
<td><p>必須</p></td>
<td><p>eformsignを埋め込んで実行する会社、ユーザー、テンプレートなどのオプションを指定</p></td>
</tr>
<tr class="row-odd"><td><p>iframe_id</p></td>
<td><p>String</p></td>
<td><p>必須</p></td>
<td><p>eformsignを埋め込んで表示するiframeのID</p></td>
</tr>
<tr class="row-even"><td><p>success_callback</p></td>
<td><p>Function</p></td>
<td><p>任意</p></td>
<td><p>eformsign文書の作業成功時、呼び出されるcallback関数</p></td>
</tr>
<tr class="row-odd"><td><p>error_callback</p></td>
<td><p>Function</p></td>
<td><p>任意</p></td>
<td><p>eformsign文書の作業失敗時、呼び出されるcallback関数</p></td>
</tr>
<tr class="row-even"><td><p>action_callback</p></td>
<td><p>Function</p></td>
<td><p>任意</p></td>
<td><p>eformsignの画面読み込み時、呼び出されるcallback関数</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>EformSignTemplate.template(template_option, iframe_id, success_callback , error_callback, action_callback)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ名</p></th>
<th class="head"><p>パラメータの種類</p></th>
<th class="head"><p>必須/任意</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>template_option</p></td>
<td><p>JSON</p></td>
<td><p>必須</p></td>
<td><p>eformsignを埋め込んで実行する会社、ユーザー、テンプレートなどのオプションを指定</p></td>
</tr>
<tr class="row-odd"><td><p>iframe_id</p></td>
<td><p>String</p></td>
<td><p>必須</p></td>
<td><p>eformsignを埋め込んで表示するiframeのID</p></td>
</tr>
<tr class="row-even"><td><p>success_callback</p></td>
<td><p>Function</p></td>
<td><p>任意</p></td>
<td><p>eformsignテンプレート/文書の作業成功時、呼び出されるcallback関数</p></td>
</tr>
<tr class="row-odd"><td><p>error_callback</p></td>
<td><p>Function</p></td>
<td><p>任意</p></td>
<td><p>eformsignテンプレート/文書の作業失敗時、呼び出されるcallback関数</p></td>
</tr>
<tr class="row-even"><td><p>action_callback</p></td>
<td><p>Function</p></td>
<td><p>任意</p></td>
<td><p>eformsignの画面読み込み時、呼び出されるcallback関数</p></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">eformsign</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="nx">document_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">action_callback</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="id40">
<h3>eformsign機能の実行<a class="headerlink" href="#id40" title="Link to this heading"></a></h3>
<p>eformsign機能を実行するにはopen関数の呼び出しが必要です。
open関数は設定するパラメータがなく、オプション設定を終えたEformSignDocumentオブジェクトまたはEformSignTemplateオブジェクトに使用して、挿入された機能を実行する役割を持ちます。
機能実行のためのオプションを設定するdocumentまたはtemplate関数を作成したら、その後open関数を作成します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">eformsign</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
</pre></div>
</div>
<section id="id41">
<h4>サンプルコード<a class="headerlink" href="#id41" title="Link to this heading"></a></h4>
<p>インストール作業を含む全体的なサンプルコードは以下の通りです。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">embedding</span><span class="w"> </span><span class="nx">test</span><span class="o">&lt;</span><span class="err">/title&gt;</span>

<span class="w">    </span><span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">src</span><span class="o">=</span><span class="s2">&quot;https://www.eformsign.com/plugins/jquery/jquery.min.js&quot;</span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">src</span><span class="o">=</span><span class="s2">&quot;https://www.eformsign.com/lib/js/efs_embedded_v2.js&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/head&gt;</span>


<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">iframe</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="w"> </span><span class="nx">width</span><span class="o">=</span><span class="s2">&quot;1440&quot;</span><span class="w"> </span><span class="nx">height</span><span class="o">=</span><span class="s2">&quot;1024&quot;</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="err">/iframe&gt;</span>


<span class="w">    </span><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">eformsign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EformSignDocument</span><span class="p">();</span>

<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">document_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 中略</span>
<span class="w">            </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;01&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="s2">&quot;template_id&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;a2c6ed9df9b642f2ade43c7efe58c9a3&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="c1">// 中略</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">success_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">            </span><span class="c1">// 省略</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">error_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">            </span><span class="c1">// 省略</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">action_callback</span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="w">            </span><span class="c1">// 省略</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="nx">eformsign</span><span class="p">.</span><span class="nb">document</span><span class="p">(</span><span class="nx">document_option</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eformsign_iframe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">success_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">error_callback</span><span class="p">,</span><span class="w"> </span><span class="nx">action_callback</span><span class="p">);</span>
<span class="w">        </span><span class="nx">eformsign</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/script&gt;</span>
<span class="o">&lt;</span><span class="err">/body&gt;</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">eformsign機能の埋め込み</a><ul>
<li><a class="reference internal" href="#id1">チュートリアル</a><ul>
<li><a class="reference internal" href="#id2">概要</a><ul>
<li><a class="reference internal" href="#id3">eformsignの埋め込みオブジェクト</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">インストール方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">埋め込みオプションの設定</a><ul>
<li><a class="reference internal" href="#id6"><strong>各機能の設定値</strong></a></li>
<li><a class="reference internal" href="#id7"><strong>必要な値の確認</strong></a><ul>
<li><a class="reference internal" href="#id">会社IDの確認方法</a></li>
<li><a class="reference internal" href="#id8">テンプレートIDの確認方法</a></li>
<li><a class="reference internal" href="#id9">文書IDの確認方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">テンプレート文書作成、文書の処理、文書のプレビュー</a><ul>
<li><a class="reference internal" href="#document-option">document_option</a><ul>
<li><a class="reference internal" href="#company">1．company(会社情報/必須)</a></li>
<li><a class="reference internal" href="#mode">2．mode(埋め込みモード/必須)</a></li>
<li><a class="reference internal" href="#user">3．user（ユーザー情報/任意）</a></li>
<li><a class="reference internal" href="#layout">4．layout(レイアウト/任意)</a></li>
<li><a class="reference internal" href="#prefill">5．prefill(自動入力/任意)</a></li>
<li><a class="reference internal" href="#return-fields">6．return_fields(リターンフィールド/任意）</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id12">マイファイルで文書作成</a><ul>
<li><a class="reference internal" href="#template-option">template_option</a><ul>
<li><a class="reference internal" href="#id13">1. company(会社情報/必須)</a></li>
<li><a class="reference internal" href="#id14">2. mode(埋め込みモード/必須)</a></li>
<li><a class="reference internal" href="#id15">3. user(ユーザー情報/任意)</a></li>
<li><a class="reference internal" href="#id16">4. layout(レイアウト/任意)</a></li>
<li><a class="reference internal" href="#id17">5. prefill(自動入力/任意)</a></li>
<li><a class="reference internal" href="#template-file">6. template_file(テンプレートファイル/任意)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id18">テンプレートの生成、テンプレートの修正、テンプレートの複製</a><ul>
<li><a class="reference internal" href="#id19">template_option</a></li>
<li><a class="reference internal" href="#callback">Callbackパラメータ</a><ul>
<li><a class="reference internal" href="#id20">1. company(会社情報/必須)</a></li>
<li><a class="reference internal" href="#id21">2. mode(組み込みモード/必須)</a></li>
<li><a class="reference internal" href="#id22">3. user(ユーザー情報/任意)</a></li>
<li><a class="reference internal" href="#id23">4. layout(レイアウト/任意)</a></li>
<li><a class="reference internal" href="#id24">5. prefill(自動入力/任意)</a></li>
<li><a class="reference internal" href="#id25">6. template_file(テンプレートファイル/任意)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id26">応答確認とコールバックの設定(オプション)</a><ul>
<li><a class="reference internal" href="#success-fail">作業の成功/失敗時</a><ul>
<li><a class="reference internal" href="#response">応答(Response)</a><ul>
<li><a class="reference internal" href="#eformsigndocument">EformSignDocument(テンプレートで文書作成、文書処理)</a></li>
<li><a class="reference internal" href="#eformsigntemplate">EformSignTemplate (マイファイルで文書作成、テンプレート生成、テンプレート修正、テンプレート複製)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id28">2. コールバック(Callback)</a><ul>
<li><a class="reference internal" href="#id29">EformSignDocument 実行例</a></li>
<li><a class="reference internal" href="#id30">EformSignTemplate 実行例</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#loading">画面のロード時</a><ul>
<li><a class="reference internal" href="#id32">応答(Response)</a><ul>
<li><a class="reference internal" href="#id33">EformSignDocument (テンプレート文書作成、文書処理)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id34">コールバック (Callback)</a><ul>
<li><a class="reference internal" href="#id35">コード例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-button">アクションボタンの生成</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id37">機能の埋め込みと実行</a><ul>
<li><a class="reference internal" href="#id38">eformsign機能の埋め込み領域の作成</a></li>
<li><a class="reference internal" href="#id39">eformsign機能の埋め込み用コードの作成</a></li>
<li><a class="reference internal" href="#id40">eformsign機能の実行</a><ul>
<li><a class="reference internal" href="#id41">サンプルコード</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="eformsign_api_overview.html">
                    <span class="icon">&lt;</span><span>eformsign APIガイド</span></a>
                
            </div>

            <div class="right">
                
                    <a href="eformsign_api_quickstart.html"><span>eformsign APIの始め方：実践ガイド</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
    &#169; 著作権 2025, FORCS CO., LTD. All rights reserved..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>